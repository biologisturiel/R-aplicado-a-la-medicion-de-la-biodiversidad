<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>R aplicado a la medici√≥n de la biodiversidad üêüü¶ÄüêÖüë®‚Äçüíª</title>
    <meta charset="utf-8" />
    <meta name="author" content="üëã Blgo. Uriel Torres Zevallos" />
    <meta name="date" content="2022-01-22" />
    <script src="libs/header-attrs-2.7/header-attrs.js"></script>
    <link href="libs/remark-css-0.0.1/default.css" rel="stylesheet" />
    <link href="libs/remark-css-0.0.1/default-fonts.css" rel="stylesheet" />
    <script src="libs/clipboard-2.0.6/clipboard.min.js"></script>
    <link href="libs/xaringanExtra-clipboard-0.2.6/xaringanExtra-clipboard.css" rel="stylesheet" />
    <script src="libs/xaringanExtra-clipboard-0.2.6/xaringanExtra-clipboard.js"></script>
    <script>window.xaringanExtraClipboard(null, {"button":"<i class=\"fa fa-clipboard\"><\/i>","success":"<i class=\"fa fa-check\" style=\"color: #90BE6D\"><\/i>","error":"<i class=\"fa fa-times-circle\" style=\"color: #F94144\"><\/i>"})</script>
    <link href="libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
    <link href="libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />
    <script src="libs/fabric-4.3.1/fabric.min.js"></script>
    <link href="libs/xaringanExtra-scribble-0.0.1/scribble.css" rel="stylesheet" />
    <script src="libs/xaringanExtra-scribble-0.0.1/scribble.js"></script>
    <script>document.addEventListener('DOMContentLoaded', function() { window.xeScribble = new Scribble({"pen_color":["#FF0000"],"pen_size":3,"eraser_size":30}) })</script>
    <link href="libs/xaringanExtra-extra-styles-0.2.6/xaringanExtra-extra-styles.css" rel="stylesheet" />
    <link href="libs/tile-view-0.2.6/tile-view.css" rel="stylesheet" />
    <script src="libs/tile-view-0.2.6/tile-view.js"></script>
    <script type="application/json" id="xaringanExtra-editable-docid">{"id":"x626d1b814824bbda38df45ea6197094","expires":14}</script>
    <script src="libs/himalaya-1.1.0/himalaya.js"></script>
    <script src="libs/js-cookie-3.0.0/js.cookie.js"></script>
    <link href="libs/editable-0.2.6/editable.css" rel="stylesheet" />
    <script src="libs/editable-0.2.6/editable.js"></script>
    <link href="libs/panelset-0.2.6/panelset.css" rel="stylesheet" />
    <script src="libs/panelset-0.2.6/panelset.js"></script>
    <script src="libs/kePrint-0.0.1/kePrint.js"></script>
    <link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# R aplicado a la medici√≥n de la biodiversidad üêüü¶ÄüêÖüë®‚Äçüíª
### üëã Blgo. Uriel Torres Zevallos
### Museo de Historia Natural de la URP
### Asociaci√≥n Cient√≠fica para la Conservaci√≥n de la Biodiversidad
### 2022-01-22

---

















## Tipos de estudio
&lt;img src = "images/tipos_estudio.png" style = "width: 110%" /&gt;

---

## Conceptos estad√≠sticos
&lt;center&gt;
&lt;img src = "images/conceptos_estadisticos.png" style = "width: 90%"/&gt;
&lt;/center&gt;

---

## Unidades de muestreo: ¬øPara qu√©? 
&lt;center&gt;
&lt;img src = "images/inext_animado.gif" style = "width: 63%" /&gt;
&lt;/center&gt;


---

## Unidades de muestreo: ¬øPara qu√©? 
&lt;center&gt;
&lt;img src = "images/inext_animado.gif" style = "width: 63%" /&gt;
&lt;/center&gt;

---

## Tipos de variables
&lt;center&gt;
&lt;img src = "images/tipos_variables.png" style = "wdith:70%" /&gt;
&lt;/center&gt;

---

## Escalas de medici√≥n
&lt;center&gt;
&lt;img src = "images/escalas_medicion.png" style = "width:150%" /&gt;
&lt;/center&gt;


---

## Empecemos...¬øQu√© rayos es R?


![](images/historia_R.jpg)
- R es considerado como un dialecto del lenguaje S 

- R fue creado por Ross Ihaka &amp; Robert Gentleman

- Lenguaje de Programaci√≥n Orientada a Objetos (POO)

- Si el objeto ya existe, su valor es borrado y reemplazado

- Operador asignaci√≥n ( &lt;- ) 

- Uso relativamente intuitivo

---

## Comunidad Comprometida

[![](images/logo stack.png)](https://stackoverflow.com/) [![](images/cross_imagen.png)](https://stats.stackexchange.com/)
[![](images/ecology_in_r.png)](https://www.facebook.com/groups/ecologyinr)

---

## ¬øPor qu√© debo usar R, y no SPSS, Infostat, Past, STATA...?

- Potencial en visualizaci√≥n de datos (gr√°ficos de alto impacto)

- Potencial en uso estad√≠stico  (Frecuentista &amp; Bayesiano)

- R resume los resultados en una l√≠nea

- R es compatible con todo (c√≥digo libre y abierto)

- Comunidad comprometida

- Conexi√≥n con otros software (\Latex, Python, Julia, QGIS, MaxEnt)

- R hace de todo

---

## Paquetes 

```r
# 22 de diciembre 
nrow(available.packages())
```

```
## [1] 18698
```

&lt;img src="index_files/figure-html/unnamed-chunk-3-1.png" style="display: block; margin: auto;" /&gt;

[Todos los Paquetes de R](https://www.rdocumentation.org/)

---

## El paquete que te soluciona la vida: **Tidyverse**
[Libro: R for Data Science (**Wickham** &amp; Grolemund, 2017)](https://r4ds.had.co.nz/)

&lt;p&gt; &lt;/p&gt;
&lt;center&gt;
&lt;img src="images/tidyverse.png" height="450px" width="600px" class="center"/&gt;
&lt;/center&gt;

---
class: center, middle, inverse
# Conociendo a RStudio: Workspace

---

# Atajos (Cheatsheet: [RStudio](https://drive.google.com/drive/u/0/folders/1T5eVp1UuQPDNDnNWRxe8WhtPDRF06aC9))

- Ctrl + Shift + N = Abrir Script

- Ctrl + S = Guardar Script

- Ctrl + W = Cerrar Script

- Ctrl + 1 = Ir a Script

- Ctrl + 2 = Ir a Consola

- Ctrl + L = Limpiar Consola

- Ctrl + 6 = Ir a Plots

- Ctrl + Tab = Mover entre Scripts

---

# Teor√≠a y creaci√≥n de objetos de R

R trabaja con objetos (POO), y **todos** tienen...
- **Nombre**: debe comenzar con una letra (A- Z o a-z), puede incluir letras, d√≠gitos (0-9), y puntos (.). R discrimina entre may√∫sculas y min√∫sculas (X y x).


```r
abundancia &lt;- c(12, 12, 11, 10, 8, 23)
playas &lt;- c("San Bartolo", "Pucusana", "Chanca√≠llo", "Santa Rosa", "Costa Azul", "Lur√≠n")
```

--

- **Contenido**: Num√©rico o Caracteres


```r
abundancia
```

```
## [1] 12 12 11 10  8 23
```

```r
playas
```

```
## [1] "San Bartolo" "Pucusana"    "Chanca√≠llo"  "Santa Rosa"  "Costa Azul" 
## [6] "Lur√≠n"
```

---
- **Dimensi√≥n** (dataframe) o **longitud** (vector)


```r
length(abundancia)
```

```
## [1] 6
```

```r
length(playas)
```

```
## [1] 6
```


```r
base_datos &lt;- data.frame(
                        Alumnos = c("Yessica", "Juan", "Uriel"),
                        Nota = c(20, 17, 11)
                        )
base_datos
```

```
##   Alumnos Nota
## 1 Yessica   20
## 2    Juan   17
## 3   Uriel   11
```

```r
dim(base_datos)
```

```
## [1] 3 2
```


---

# Estructura de datos (**clases**) en R
![](images/estrutura_datos.jpeg)
---

## Vector


```r
Playas &lt;- c("San Bartolo", "Pucusana", "Chanca√≠llo", "Santa Rosa", "Costa Azul", "Lur√≠n")
class(Playas)
```

```
## [1] "character"
```

--


```r
Nivel_contaminacion &lt;- c("Saludable", "No Saludable", "Poco Saludable", "Saludable", "No Saludable", "No Saludable")
class(Nivel_contaminacion)
```

```
## [1] "character"
```

--


```r
Presencia_garza &lt;- c(T, F, T, T, F, T)
class(Presencia_garza)
```

```
## [1] "logical"
```

--


```r
Abundancia_garza &lt;- c(12, 23, 10, 5, 10, 12)
class(Abundancia_garza)
```

```
## [1] "numeric"
```

---

## Data frame

```r
data &lt;- data.frame(Playas, Nivel_contaminacion, Presencia_garza, Abundancia_garza)

data
```

```
##        Playas Nivel_contaminacion Presencia_garza Abundancia_garza
## 1 San Bartolo           Saludable            TRUE               12
## 2    Pucusana        No Saludable           FALSE               23
## 3  Chanca√≠llo      Poco Saludable            TRUE               10
## 4  Santa Rosa           Saludable            TRUE                5
## 5  Costa Azul        No Saludable           FALSE               10
## 6       Lur√≠n        No Saludable            TRUE               12
```

```r
dim(data)
```

```
## [1] 6 4
```

```r
class(data)
```

```
## [1] "data.frame"
```

---

## Listas

```r
lista_a &lt;- list(Playas, Nivel_contaminacion, data)
```

--


```r
lista_a[[1]]
```

```
## [1] "San Bartolo" "Pucusana"    "Chanca√≠llo"  "Santa Rosa"  "Costa Azul" 
## [6] "Lur√≠n"
```

--


```r
lista_a[[2]]
```

```
## [1] "Saludable"      "No Saludable"   "Poco Saludable" "Saludable"     
## [5] "No Saludable"   "No Saludable"
```

--


```r
lista_a[[3]]
```

```
##        Playas Nivel_contaminacion Presencia_garza Abundancia_garza
## 1 San Bartolo           Saludable            TRUE               12
## 2    Pucusana        No Saludable           FALSE               23
## 3  Chanca√≠llo      Poco Saludable            TRUE               10
## 4  Santa Rosa           Saludable            TRUE                5
## 5  Costa Azul        No Saludable           FALSE               10
## 6       Lur√≠n        No Saludable            TRUE               12
```

---
## Listas


```r
lista_b &lt;- list("Hola", Playas, "Colores") 
lista_b
```

```
## [[1]]
## [1] "Hola"
## 
## [[2]]
## [1] "San Bartolo" "Pucusana"    "Chanca√≠llo"  "Santa Rosa"  "Costa Azul" 
## [6] "Lur√≠n"      
## 
## [[3]]
## [1] "Colores"
```

---
## Indexaci√≥n: Selecci√≥n de subconjuntos 
### "Ingresar al objeto"

- Vector: [i]

```r
vector[4]
```

--

- Matrices y dataframes: [i, j]

```r
dataframe[4, 1]
```

--

- Arrays: [i, j, k]

```r
arreglo[1, 4, 9]
```

--

- Listas: [[i]]

```r
lista[[1]]
```


---
## Indexaci√≥n en un Data frame

```r
data[1, 2]
```

```
## [1] "Saludable"
```

```r
data[3, 1]
```

```
## [1] "Chanca√≠llo"
```

```r
data[3, c(1,2,3,4)]
```

```
##       Playas Nivel_contaminacion Presencia_garza Abundancia_garza
## 3 Chanca√≠llo      Poco Saludable            TRUE               10
```

```r
data[3, 1:4]
```

```
##       Playas Nivel_contaminacion Presencia_garza Abundancia_garza
## 3 Chanca√≠llo      Poco Saludable            TRUE               10
```

---
### Data frame: Indexaci√≥n con DataEditR

```r
library(DataEditR)
# DataEditR::data_edit(data)
```
![](images/baby_yoda.gif)

---

## Resumen
&lt;center&gt;
&lt;img src = "images/resumen_tipos_clases.png" style = "width: 94%" /&gt;
&lt;/center&gt;

---
## Conversi√≥n y manipulaci√≥n de objetos 

```r
numerico &lt;- c(1, 2, 3, 5, 67, 12, 231, 23)
numerico_2 &lt;- c(1, 0, 1, 0, 1, 1, 1, 1)
```

--

- Convertir en caracter

```r
caracter_convertido &lt;-  as.character(numerico)
```

--

- Convertir en num√©rico

```r
numerico_convertido &lt;- as.numeric(caracter)
```

--

- Convertir en l√≥gico

```r
logico_convertido &lt;- as.logical(numerico_2)
```

--

- Convertir en dataframe

```r
df_convertido &lt;- as.data.frame(numerico_2)
```

---
# Operadores l√≥gicos üëÄ

&lt;table class="table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; S√≠mbolo &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; Definici√≥n &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; == &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; igual &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; != &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; no igual (diferente) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; &amp;lt; &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; menor que &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; &amp;lt;= &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; menor o igual que &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; &amp;gt; &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; mayor que &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; &amp;gt;= &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; mayor o igual que &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; | &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; o &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; &amp;amp; &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; y &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; ! &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; no &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; %in% &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; incluido en &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

# Bases de datos
## Untidy data
&lt;center&gt;
&lt;img src = "images/untidy.png" style = "width: 90%" /&gt;

&lt;/center&gt;



---

## Tidy data [(Wickham, 2014)](https://vita.had.co.nz/papers/tidy-data.pdf)

 - Estructura adecuada de la base de datos
 
 - Variable -&gt; columna
 
 - Observaci√≥n -&gt; fila
 
 - Decimales deben ser puntos (se sugiere)

![](images/tidy_data.png)

---


## ¬øSer√° tidy?

```r
df1 &lt;- data.frame(
                 nombres = c("Hormiga A", "Hormiga B", "Hormiga C", "Hormiga D"),
                 Pantanos_Villa = c(12, 22, 9, 10), 
                 Ventanilla = c(0, 7, 6, 1)
                 )
```

&lt;table class=" lightable-paper lightable-striped table" style='font-family: "Arial Narrow", arial, helvetica, sans-serif; margin-left: auto; margin-right: auto; font-size: 13px; margin-left: auto; margin-right: auto;'&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; nombres &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Pantanos_Villa &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Ventanilla &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Hormiga A &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 12 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Hormiga B &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 22 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Hormiga C &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 9 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 6 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Hormiga D &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;


---
## ¬øSer√° tidy?

```r
df2 &lt;- data.frame(
                  localidad = c("Pantanos de Villa, Ventanilla", "Pantanos de Villa, Ventanilla" ),
                  Hormiga_A = c(12, 0), 
                  Hormiga_B = c(22, 7), 
                  Hormiga_C = c(9, 6), 
                  Hormiga_D = c(10, 1)
                 )
```


&lt;table class=" lightable-paper lightable-striped table" style='font-family: "Arial Narrow", arial, helvetica, sans-serif; margin-left: auto; margin-right: auto; font-size: 13px; margin-left: auto; margin-right: auto;'&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; localidad &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Hormiga_A &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Hormiga_B &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Hormiga_C &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Hormiga_D &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Pantanos de Villa, Ventanilla &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 12 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 22 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 9 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Pantanos de Villa, Ventanilla &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 6 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---
## ¬øSer√° tidy? 



```r
df3 &lt;-  data.frame(
                  especie = c("Hormiga A", "Hormiga B", "Hormiga C", "Hormiga D", "Hormiga A", "Hormiga B", "Hormiga C", "Hormiga D"), 
                  localidad = c("Pantanos de Villa", 'Pantanos de Villa', "Pantanos de Villa", "Pantanos de Villa", "Ventanilla", 'Ventanilla', "Ventanilla", "Ventanilla"), 
                  abundancia = c(12, 22, 9, 10, 0, 7, 6, 1)
                  )
```

&lt;table class=" lightable-paper lightable-striped table" style='font-family: "Arial Narrow", arial, helvetica, sans-serif; margin-left: auto; margin-right: auto; font-size: 13px; margin-left: auto; margin-right: auto;'&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; especie &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; localidad &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; abundancia &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Hormiga A &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Pantanos de Villa &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 12 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Hormiga B &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Pantanos de Villa &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 22 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Hormiga C &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Pantanos de Villa &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 9 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Hormiga D &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Pantanos de Villa &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Hormiga A &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Ventanilla &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Hormiga B &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Ventanilla &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Hormiga C &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Ventanilla &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 6 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Hormiga D &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Ventanilla &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---
## ¬øY si no tengo ninguna data üò•?


```r
data("iris")
data("msleep")
data("trees")
data("beavers")
data("PlantGrowth")
data("InsectSprays")

library(iNEXT)
library(vegan)
data("ant")
data("spider")

# R presente en Ciencia ciudadana: 
library(rgbif)
library(rinat)
```

---

class: inverse, middle, center
# Importar bases de datos

---

### Importar en formato **CSV** (comma-separated values)

```r
df &lt;- read.csv("/home/biologisturiel/Descargas/data/data_emerita.csv",
               header = T,
               sep = ",",
               dec = ".")
```

--


```r
head(df, 4)
```

```
##   ID       NMP      EST FC                  LC DIST LCT    SEX NTP RP P_altmani
## 1  1 Saludable Invierno  0 Santa Mar√≠a del Mar    0 2.0  Macho   0  0         0
## 2  2 Saludable Invierno  0 Santa Mar√≠a del Mar    5 2.1  Macho   1  1         1
## 3  3 Saludable Invierno  0 Santa Mar√≠a del Mar    5 3.2 Hembra   2  1         2
## 4  4 Saludable Invierno  0 Santa Mar√≠a del Mar   10 1.7  Macho   0  0         0
##   Proleptus_sp.
## 1             0
## 2             0
## 3             0
## 4             0
```

---

### Importar en formato Excel (xls, xlsx)

```r
library(readxl)
df_excel &lt;- read_excel('aca debe ir la direcci√≥n en donde se encuentra tu archivo, tu archivo debe acabar en xls o xlsx', sheet = "Hoja1")
```

--

### Importar un Excel Drive (Google)

```r
library(gsheet)
df_excel_drive &lt;- gsheet2tbl("https://docs.google.com/spreadsheets/d/13gV_HUqe55328loEn0XPaxxG7-pNbpZ9/edit#gid=1922099029")
```

--

### Importar archivos de m√°s de 3GB (muy pesados)

```r
library(data.table)
df_pesada &lt;- fread("/home/biologisturiel/Descargas/data/data_emerita.csv")
```

---

### Importar del portapapeles (clipboard)

```r
df_clipboard &lt;- read.delim("clipboard")
```

--

### Importar archivos delimitados por espacios (txt) (por ejem [GBIF](https://www.gbif.org/))

```r
library(data.table)
df_gbif &lt;- fread("/home/biologisturiel/Descargas/data/occurrence.txt")
```

--

### Importar con file.choose 

```r
df_aelegir &lt;- fread(file.choose()) 
```

--

### Importar con clicks 

```r
# Desde RStudio
```

---

class: inverse, middle, center
# Exportar bases de datos (y resultados)

---

### Exportar en formato CSV (decimal: punto)

```r
data("iris")
write.csv(iris, "df_iris_punto.csv", row.names = F, dec = ".")
```

--

### Exportar en formato CSV (decimal: coma)

```r
data("iris")
write.csv(iris, "df_iris_coma.csv", row.names = F, dec = ",")
```

--

### Exportar en formato Excel (xls, xslx)

```r
data("msleep")
write.xlsx(msleep, "df_msleep.xlsx")
```

---
## Comandos fundamentales para reconocer un objeto 

```r
# muestra todos los objetos del environment 
ls()
# muestra los objetos acorde al patr√≥n solicitado
ls(pat = "^m")
# estructura del objeto
str()
# remueve objeto 
rm()
# remueve todos los objetos
rm(list = ls())
# remueve objetos acorde al patr√≥n
rm(list = ls(pat = "^m"))
# clase de objeto
class()
# filas del objeto
nrow()
# columnas del objeto
ncol()
```

---

## Comandos fundamentales para reconocer un objeto 

```r
# longitud 
length()
# dimensi√≥n
dim()
# ver niveles del factor
level()
# nombres de columnas del objeto 
names()
# abrir (ver) el objeto
View()
# ver parte inicial del objeto 
head()
# ver parte final del objeto
tail()
# resumen del ob-jeto
summary()
# frecuencias absolutas del objeto
table()
# frecuencias relativas del objeto
prop.table()
```

---


## Obtenci√≥n de estad√≠sticos 
### [Data de aplicaci√≥n](https://www.researchgate.net/publication/330900496_IMPLICATIONS_OF_THE_SANITARY_QUALITY_OF_BEACHES_IN_THE_PARASITIC_ECOLOGY_OF_EMERITA_ANALOGA_STIMPSON_1857_DECAPODA_HIPPIDAE)


```r
library(tidyverse)
glimpse(df)
```

```
## Rows: 3,625
## Columns: 12
## $ ID            &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 1‚Ä¶
## $ NMP           &lt;chr&gt; "Saludable", "Saludable", "Saludable", "Saludable", "Sal‚Ä¶
## $ EST           &lt;chr&gt; "Invierno", "Invierno", "Invierno", "Invierno", "Inviern‚Ä¶
## $ FC            &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶
## $ LC            &lt;chr&gt; "Santa Mar√≠a del Mar", "Santa Mar√≠a del Mar", "Santa Mar‚Ä¶
## $ DIST          &lt;int&gt; 0, 5, 5, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 15, 15,‚Ä¶
## $ LCT           &lt;dbl&gt; 2.0, 2.1, 3.2, 1.7, 1.7, 1.6, 3.4, 2.2, 2.2, 2.2, 1.6, 2‚Ä¶
## $ SEX           &lt;chr&gt; "Macho", "Macho", "Hembra", "Macho", "Macho", "Macho", "‚Ä¶
## $ NTP           &lt;int&gt; 0, 1, 2, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1,‚Ä¶
## $ RP            &lt;int&gt; 0, 1, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1,‚Ä¶
## $ P_altmani     &lt;int&gt; 0, 1, 2, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1,‚Ä¶
## $ Proleptus_sp. &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶
```

---
### Conociendo los **niveles** de las variables independientes (factor)

```r
unique(df$LC)
```

```
##  [1] "Santa Mar√≠a del Mar" "Los Vi√±os"           "Venecia"            
##  [4] "Hermosa"             "San Pedro"           "Los Delfines"       
##  [7] "Conch√°n"             "El Silencio"         "Chica"              
## [10] "Costa Azul"          "Los Yuyos"           "Agua Dulce"         
## [13] "Pucusana"
```
--


```r
unique(df$NMP)
```

```
## [1] "Saludable"              "No saludable"           "Regularmente saludable"
```

--

```r
unique(df$EST)
```

```
## [1] "Invierno"  "Primavera" "Oto√±o"
```

--

```r
unique(df$SEX)
```

```
## [1] "Macho"  "Hembra"
```

---
### Valores m√°ximos y m√≠nimos 

```r
min(df$NTP)
```

```
## [1] 0
```

```r
which.max(df$NTP)
```

```
## [1] 1702
```
--


```r
max(df$NTP)
```

```
## [1] 26
```

```r
which.min(df$NTP)
```

```
## [1] 1
```

--

```r
range(df$NTP)
```

```
## [1]  0 26
```

```r
c(min(df$NTP), max(df$NTP))
```

```
## [1]  0 26
```

---

### Estad√≠sticos seg√∫n variable independiente (factor)

```r
aggregate(NTP ~ NMP, df, mean)
```

```
##                      NMP      NTP
## 1           No saludable 5.800000
## 2 Regularmente saludable 2.933333
## 3              Saludable 2.123505
```

--


```r
aggregate(NTP ~ NMP, df, sd)
```

```
##                      NMP      NTP
## 1           No saludable 4.491261
## 2 Regularmente saludable 2.313521
## 3              Saludable 3.016333
```

---

### Estad√≠sticos seg√∫n variable independiente (factor)

```r
library(Rmisc)
RP_lc_sex &lt;- summarySE(df, measurevar = c("RP"), groupvars = c("LC", "SEX"))
RP_lc_sex
```

```
##                     LC    SEX   N         RP        sd         se         ci
## 1           Agua Dulce Hembra 232 1.20258621 0.7601505 0.04990633 0.09832977
## 2           Agua Dulce  Macho 329 1.20668693 0.7155615 0.03945018 0.07760730
## 3                Chica Hembra  43 0.81395349 0.5878052 0.08963945 0.18089974
## 4                Chica  Macho  21 0.95238095 0.7400129 0.16148405 0.33684982
## 5              Conch√°n Hembra  10 1.40000000 0.5163978 0.16329932 0.36940872
## 6              Conch√°n  Macho   5 1.60000000 0.5477226 0.24494897 0.68008738
## 7           Costa Azul Hembra   3 2.00000000 0.0000000 0.00000000 0.00000000
## 8           Costa Azul  Macho   3 1.33333333 1.1547005 0.66666667 2.86843515
## 9          El Silencio Hembra  57 0.82456140 0.4676234 0.06193824 0.12407720
## 10         El Silencio  Macho  23 0.82608696 0.3875534 0.08081047 0.16759065
## 11             Hermosa Hembra 127 0.65354331 0.6828739 0.06059526 0.11991623
## 12             Hermosa  Macho 104 0.34615385 0.6036978 0.05919744 0.11740417
## 13        Los Delfines Hembra  98 1.02040816 0.8492518 0.08578739 0.17026422
## 14        Los Delfines  Macho 348 0.58333333 0.7093109 0.03802306 0.07478466
## 15           Los Vi√±os Hembra 416 0.75721154 0.6810310 0.03339029 0.06563519
## 16           Los Vi√±os  Macho 438 0.67351598 0.6351864 0.03035038 0.05965086
## 17           Los Yuyos Hembra   9 1.11111111 0.6009252 0.20030840 0.46191201
## 18           Los Yuyos  Macho   3 0.66666667 0.5773503 0.33333333 1.43421758
## 19            Pucusana Hembra   3 1.33333333 0.5773503 0.33333333 1.43421758
## 20            Pucusana  Macho   6 1.16666667 0.9831921 0.40138649 1.03179681
## 21           San Pedro Hembra 136 1.20588235 0.7899146 0.06773462 0.13395824
## 22           San Pedro  Macho 489 1.05725971 0.8400780 0.03798964 0.07464345
## 23 Santa Mar√≠a del Mar Hembra  17 0.17647059 0.3929526 0.09530501 0.20203760
## 24 Santa Mar√≠a del Mar  Macho 117 0.05128205 0.2215211 0.02047964 0.04056250
## 25             Venecia Hembra 234 0.91452991 0.7869390 0.05144381 0.10135447
## 26             Venecia  Macho 354 0.88983051 0.7540324 0.04007637 0.07881848
```

---

### Estad√≠sticos seg√∫n variable independiente (factor)

```r
library(Rmisc)
NTP_lc_sex &lt;- summarySE(df, measurevar = c("NTP"), groupvars = c("LC", "SEX"))
```

---

### Redondear 

```r
round(NTP_lc_sex$NTP, 3)
```

```
##  [1] 2.879 2.684 1.860 2.429 5.500 6.400 4.000 3.333 1.965 2.435 1.157 0.577
## [13] 3.694 1.626 1.649 1.436 2.333 1.333 3.333 3.333 4.588 3.008 0.235 0.060
## [25] 2.376 1.805
```

--


```r
NTP_lc_sex[, -c(1,2)] &lt;- round(NTP_lc_sex[, -c(1,2)], 2)
head(NTP_lc_sex, 7)
```

```
##           LC    SEX   N  NTP   sd   se   ci
## 1 Agua Dulce Hembra 232 2.88 2.56 0.17 0.33
## 2 Agua Dulce  Macho 329 2.68 2.57 0.14 0.28
## 3      Chica Hembra  43 1.86 1.86 0.28 0.57
## 4      Chica  Macho  21 2.43 2.60 0.57 1.18
## 5    Conch√°n Hembra  10 5.50 4.77 1.51 3.41
## 6    Conch√°n  Macho   5 6.40 4.34 1.94 5.38
## 7 Costa Azul Hembra   3 4.00 1.00 0.58 2.48
```

---

## Subsetting (filtrar, seleccionar) 

```r
subset(NTP_lc_sex, select = c(LC, SEX, N, NTP, sd))
```

--


```r
subset(NTP_lc_sex, NTP &gt; 3)
```

```
##              LC    SEX   N  NTP   sd   se   ci
## 5       Conch√°n Hembra  10 5.50 4.77 1.51 3.41
## 6       Conch√°n  Macho   5 6.40 4.34 1.94 5.38
## 7    Costa Azul Hembra   3 4.00 1.00 0.58 2.48
## 8    Costa Azul  Macho   3 3.33 3.51 2.03 8.72
## 13 Los Delfines Hembra  98 3.69 5.01 0.51 1.00
## 19     Pucusana Hembra   3 3.33 1.53 0.88 3.79
## 20     Pucusana  Macho   6 3.33 2.66 1.09 2.79
## 21    San Pedro Hembra 136 4.59 5.64 0.48 0.96
## 22    San Pedro  Macho 489 3.01 3.59 0.16 0.32
```

---

## Subsetting (filtrar, seleccionar) 

```r
subset(NTP_lc_sex, NTP == 4)
```

```
##           LC    SEX N NTP sd   se   ci
## 7 Costa Azul Hembra 3   4  1 0.58 2.48
```
--


```r
subset(NTP_lc_sex, NTP != 4)
```

```
##                     LC    SEX   N  NTP   sd   se   ci
## 1           Agua Dulce Hembra 232 2.88 2.56 0.17 0.33
## 2           Agua Dulce  Macho 329 2.68 2.57 0.14 0.28
## 3                Chica Hembra  43 1.86 1.86 0.28 0.57
## 4                Chica  Macho  21 2.43 2.60 0.57 1.18
## 5              Conch√°n Hembra  10 5.50 4.77 1.51 3.41
## 6              Conch√°n  Macho   5 6.40 4.34 1.94 5.38
## 8           Costa Azul  Macho   3 3.33 3.51 2.03 8.72
## 9          El Silencio Hembra  57 1.96 1.76 0.23 0.47
## 10         El Silencio  Macho  23 2.43 2.45 0.51 1.06
## 11             Hermosa Hembra 127 1.16 1.53 0.14 0.27
## 12             Hermosa  Macho 104 0.58 1.37 0.13 0.27
## 13        Los Delfines Hembra  98 3.69 5.01 0.51 1.00
## 14        Los Delfines  Macho 348 1.63 3.14 0.17 0.33
## 15           Los Vi√±os Hembra 416 1.65 2.47 0.12 0.24
## 16           Los Vi√±os  Macho 438 1.44 2.07 0.10 0.19
## 17           Los Yuyos Hembra   9 2.33 1.87 0.62 1.44
## 18           Los Yuyos  Macho   3 1.33 1.53 0.88 3.79
## 19            Pucusana Hembra   3 3.33 1.53 0.88 3.79
## 20            Pucusana  Macho   6 3.33 2.66 1.09 2.79
## 21           San Pedro Hembra 136 4.59 5.64 0.48 0.96
## 22           San Pedro  Macho 489 3.01 3.59 0.16 0.32
## 23 Santa Mar√≠a del Mar Hembra  17 0.24 0.56 0.14 0.29
## 24 Santa Mar√≠a del Mar  Macho 117 0.06 0.27 0.03 0.05
## 25             Venecia Hembra 234 2.38 2.97 0.19 0.38
## 26             Venecia  Macho 354 1.81 2.32 0.12 0.24
```

---

## Subsetting (filtrar, seleccionar) 

```r
subset(NTP_lc_sex, NTP %in% 5.50)
```

```
##        LC    SEX  N NTP   sd   se   ci
## 5 Conch√°n Hembra 10 5.5 4.77 1.51 3.41
```

--


```r
subset(NTP_lc_sex, NTP %in% c(4, 5.50))
```

```
##           LC    SEX  N NTP   sd   se   ci
## 5    Conch√°n Hembra 10 5.5 4.77 1.51 3.41
## 7 Costa Azul Hembra  3 4.0 1.00 0.58 2.48
```

---

##  NAs (not available) y outliers (datos at√≠picos)

```r
df_na &lt;- data.frame(abundancia = c(1, NA, NA, 2, 3, 2, 3, NA, 24, 40), localidad = c("sitio a", "sitio a", "sitio a", "sitio a", "sitio a", "sitio b", "sitio b", "sitio b", "sitio b", "sitio b"), altitud = c(760, 760, 760, 760, 760, 1090, 1090, 1090, 1090, 1090))
```


```r
df_na
```

```
##    abundancia localidad altitud
## 1           1   sitio a     760
## 2          NA   sitio a     760
## 3          NA   sitio a     760
## 4           2   sitio a     760
## 5           3   sitio a     760
## 6           2   sitio b    1090
## 7           3   sitio b    1090
## 8          NA   sitio b    1090
## 9          24   sitio b    1090
## 10         40   sitio b    1090
```

---

### plot_missing: para ver los NAs por variable

```r
library(DataExplorer)
plot_missing(df_na)
```

![](index_files/figure-html/unnamed-chunk-75-1.png)&lt;!-- --&gt;

---

### Eliminar NAs (tidyr)

```r
df_na2 &lt;- drop_na(df_na)
df_na2
```

```
##   abundancia localidad altitud
## 1          1   sitio a     760
## 2          2   sitio a     760
## 3          3   sitio a     760
## 4          2   sitio b    1090
## 5          3   sitio b    1090
## 6         24   sitio b    1090
## 7         40   sitio b    1090
```

---

### Eliminar NAs (tidyr)

```r
plot_missing(df_na2)
```

![](index_files/figure-html/unnamed-chunk-77-1.png)&lt;!-- --&gt;

---

### ¬øEliminar Outliers? **(¬øcu√°ndo?: LM, GLM; criterio)**
- Criterio para establecer l√≠mites de outliers:
  
- Rango intercuart√≠lico (RIQ): `$$Q3 - Q1$$`
  
- L√≠mite m√°ximo: `$$Q3 + 1.5 * RIQ$$`
  
- L√≠mite m√≠nimo: `$$Q1 - 1.5 * RIQ$$` 


```r
fivenum(df_na$abundancia)
```

```
## [1]  1.0  2.0  3.0 13.5 40.0
```

---

### Recordando los estad√≠sticos de un boxplot

```r
boxplot(df_na$abundancia)
```

![](index_files/figure-html/unnamed-chunk-79-1.png)&lt;!-- --&gt;

---
### Eliminar outliers (y los que tienden a ser outliers)

```r
outliers &lt;- boxplot(df_na$abundancia, plot = F)$out
outliers
```

```
## [1] 40
```


```r
df_sin_outlier &lt;- df_na[-which(df_na$abundancia %in% outliers), ]
boxplot(df_sin_outlier$abundancia)
```

&lt;img src="index_files/figure-html/unnamed-chunk-81-1.png" style="display: block; margin: auto auto auto 0;" /&gt;

---

class: inverse, middle, center
# Introducci√≥n al tidyverse ü§©

---

## Data de an√°lisis

```r
data(msleep)

glimpse(msleep)
```

```
## Rows: 83
## Columns: 11
## $ name         &lt;chr&gt; "Cheetah", "Owl monkey", "Mountain beaver", "Greater shor‚Ä¶
## $ genus        &lt;chr&gt; "Acinonyx", "Aotus", "Aplodontia", "Blarina", "Bos", "Bra‚Ä¶
## $ vore         &lt;chr&gt; "carni", "omni", "herbi", "omni", "herbi", "herbi", "carn‚Ä¶
## $ order        &lt;chr&gt; "Carnivora", "Primates", "Rodentia", "Soricomorpha", "Art‚Ä¶
## $ conservation &lt;chr&gt; "lc", NA, "nt", "lc", "domesticated", NA, "vu", NA, "dome‚Ä¶
## $ sleep_total  &lt;dbl&gt; 12.1, 17.0, 14.4, 14.9, 4.0, 14.4, 8.7, 7.0, 10.1, 3.0, 5‚Ä¶
## $ sleep_rem    &lt;dbl&gt; NA, 1.8, 2.4, 2.3, 0.7, 2.2, 1.4, NA, 2.9, NA, 0.6, 0.8, ‚Ä¶
## $ sleep_cycle  &lt;dbl&gt; NA, NA, NA, 0.1333333, 0.6666667, 0.7666667, 0.3833333, N‚Ä¶
## $ awake        &lt;dbl&gt; 11.9, 7.0, 9.6, 9.1, 20.0, 9.6, 15.3, 17.0, 13.9, 21.0, 1‚Ä¶
## $ brainwt      &lt;dbl&gt; NA, 0.01550, NA, 0.00029, 0.42300, NA, NA, NA, 0.07000, 0‚Ä¶
## $ bodywt       &lt;dbl&gt; 50.000, 0.480, 1.350, 0.019, 600.000, 3.850, 20.490, 0.04‚Ä¶
```


---

class: center, inverse, middle
# Pipeline: %&gt;% (Ctrl + Shift + M)

---

## Ejemplos con pipeline
- x %&gt;% f(y) es lo mismo que f(x, y)
- y %&gt;% f(x, ., z) es lo mismo que f(x, y, z )


```r
df_ento %&gt;% head()
df_ento %&gt;% tail()
df_ento %&gt;% str()
df_ento %&gt;% subset(NTP %in% c(23:26))
df_ento %&gt;% view()
df_ento %&gt;% nrow()
df_ento %&gt;% ncol()
df_ento$FAMILIA %&gt;% class()
df_ento$PUNTO %&gt;% unique()
df_ento$ORDEN %&gt;% as.factor() %&gt;% levels()
df_ento$ORDEN %&gt;% table() %&gt;% prop.table()
objetos_eliminar &lt;- c(iris, asd, ant)
objetos_eliminar %&gt;% rm()
```

---

## Ordenando la data con gather(reunir) y spread(extender)
- Gather: Reune columans en filas
- Spread: Extiende filas en columnas

## ¬øgather o spread?


```r
df1 &lt;- data.frame(
  nombres = c("Hormiga A", "Hormiga B", "Hormiga C", "Hormiga D"),
  Pantanos_Villa = c(12, 22, 9, 10), 
  Ventanilla = c(0, 7, 6, 1)
)
```



```r
df1
```

```
##     nombres Pantanos_Villa Ventanilla
## 1 Hormiga A             12          0
## 2 Hormiga B             22          7
## 3 Hormiga C              9          6
## 4 Hormiga D             10          1
```


```r
df1 %&gt;% gather(key = "lugares", value = "abundancia", -nombres)
```

```
##     nombres        lugares abundancia
## 1 Hormiga A Pantanos_Villa         12
## 2 Hormiga B Pantanos_Villa         22
## 3 Hormiga C Pantanos_Villa          9
## 4 Hormiga D Pantanos_Villa         10
## 5 Hormiga A     Ventanilla          0
## 6 Hormiga B     Ventanilla          7
## 7 Hormiga C     Ventanilla          6
## 8 Hormiga D     Ventanilla          1
```

---

## ¬øgather o spread?


```r
df2 &lt;- data.frame(
  localidad = c("Pantanos de Villa, Ventanilla", "Pantanos de Villa, Ventanilla" ),
  Hormiga_A = c(12, 0), 
  Hormiga_B = c(22, 7), 
  Hormiga_C = c(9, 6), 
  Hormiga_D = c(10, 1)
)

df2
```

```
##                       localidad Hormiga_A Hormiga_B Hormiga_C Hormiga_D
## 1 Pantanos de Villa, Ventanilla        12        22         9        10
## 2 Pantanos de Villa, Ventanilla         0         7         6         1
```

--


```r
df2_gather &lt;- df2 %&gt;% gather(key = "Especies", value = "abundancia", -localidad)

df2_gather_2 &lt;- df2 %&gt;% gather(key = "Especies", value = "abundancia", 2:5)

df2_gather_3 &lt;- df2 %&gt;% gather(key = "Especies", value = "abundancia", c(2, 3, 4, 5))
```

---

## Separate 

- Separa una columna en varias


```r
df2_separate &lt;- df2_gather %&gt;% separate("localidad", c("humedalA", "humedalB"), sep = ",")
```


-- 


```r
df2_separate
```

```
##            humedalA    humedalB  Especies abundancia
## 1 Pantanos de Villa  Ventanilla Hormiga_A         12
## 2 Pantanos de Villa  Ventanilla Hormiga_A          0
## 3 Pantanos de Villa  Ventanilla Hormiga_B         22
## 4 Pantanos de Villa  Ventanilla Hormiga_B          7
## 5 Pantanos de Villa  Ventanilla Hormiga_C          9
## 6 Pantanos de Villa  Ventanilla Hormiga_C          6
## 7 Pantanos de Villa  Ventanilla Hormiga_D         10
## 8 Pantanos de Villa  Ventanilla Hormiga_D          1
```

---

## Unite
- Une varias columnas en una 


```r
df2_separate %&gt;% unite(localidad, c("humedalA", "humedalB"), sep = "-")
```

```
##                       localidad  Especies abundancia
## 1 Pantanos de Villa- Ventanilla Hormiga_A         12
## 2 Pantanos de Villa- Ventanilla Hormiga_A          0
## 3 Pantanos de Villa- Ventanilla Hormiga_B         22
## 4 Pantanos de Villa- Ventanilla Hormiga_B          7
## 5 Pantanos de Villa- Ventanilla Hormiga_C          9
## 6 Pantanos de Villa- Ventanilla Hormiga_C          6
## 7 Pantanos de Villa- Ventanilla Hormiga_D         10
## 8 Pantanos de Villa- Ventanilla Hormiga_D          1
```

---

## Select


```r
msleep %&gt;% select(order, order, sleep_total)
```

```
## # A tibble: 83 x 2
##    order        sleep_total
##    &lt;chr&gt;              &lt;dbl&gt;
##  1 Carnivora           12.1
##  2 Primates            17  
##  3 Rodentia            14.4
##  4 Soricomorpha        14.9
##  5 Artiodactyla         4  
##  6 Pilosa              14.4
##  7 Carnivora            8.7
##  8 Rodentia             7  
##  9 Carnivora           10.1
## 10 Artiodactyla         3  
## # ‚Ä¶ with 73 more rows
```

---

## Select


```r
msleep %&gt;% select(3:5)
```

```
## # A tibble: 83 x 3
##    vore  order        conservation
##    &lt;chr&gt; &lt;chr&gt;        &lt;chr&gt;       
##  1 carni Carnivora    lc          
##  2 omni  Primates     &lt;NA&gt;        
##  3 herbi Rodentia     nt          
##  4 omni  Soricomorpha lc          
##  5 herbi Artiodactyla domesticated
##  6 herbi Pilosa       &lt;NA&gt;        
##  7 carni Carnivora    vu          
##  8 &lt;NA&gt;  Rodentia     &lt;NA&gt;        
##  9 carni Carnivora    domesticated
## 10 herbi Artiodactyla lc          
## # ‚Ä¶ with 73 more rows
```

---

## Select


```r
msleep %&gt;% select(c(5, 6, 7))
```

```
## # A tibble: 83 x 3
##    conservation sleep_total sleep_rem
##    &lt;chr&gt;              &lt;dbl&gt;     &lt;dbl&gt;
##  1 lc                  12.1      NA  
##  2 &lt;NA&gt;                17         1.8
##  3 nt                  14.4       2.4
##  4 lc                  14.9       2.3
##  5 domesticated         4         0.7
##  6 &lt;NA&gt;                14.4       2.2
##  7 vu                   8.7       1.4
##  8 &lt;NA&gt;                 7        NA  
##  9 domesticated        10.1       2.9
## 10 lc                   3        NA  
## # ‚Ä¶ with 73 more rows
```

---

## Select


```r
msleep %&gt;% select_if(is.numeric)
```

```
## # A tibble: 83 x 6
##    sleep_total sleep_rem sleep_cycle awake  brainwt  bodywt
##          &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;
##  1        12.1      NA        NA      11.9 NA        50    
##  2        17         1.8      NA       7    0.0155    0.48 
##  3        14.4       2.4      NA       9.6 NA         1.35 
##  4        14.9       2.3       0.133   9.1  0.00029   0.019
##  5         4         0.7       0.667  20    0.423   600    
##  6        14.4       2.2       0.767   9.6 NA         3.85 
##  7         8.7       1.4       0.383  15.3 NA        20.5  
##  8         7        NA        NA      17   NA         0.045
##  9        10.1       2.9       0.333  13.9  0.07     14    
## 10         3        NA        NA      21    0.0982   14.8  
## # ‚Ä¶ with 73 more rows
```

---

## Select


```r
msleep %&gt;% select_if(is.character)
```

```
## # A tibble: 83 x 5
##    name                       genus       vore  order        conservation
##    &lt;chr&gt;                      &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;        &lt;chr&gt;       
##  1 Cheetah                    Acinonyx    carni Carnivora    lc          
##  2 Owl monkey                 Aotus       omni  Primates     &lt;NA&gt;        
##  3 Mountain beaver            Aplodontia  herbi Rodentia     nt          
##  4 Greater short-tailed shrew Blarina     omni  Soricomorpha lc          
##  5 Cow                        Bos         herbi Artiodactyla domesticated
##  6 Three-toed sloth           Bradypus    herbi Pilosa       &lt;NA&gt;        
##  7 Northern fur seal          Callorhinus carni Carnivora    vu          
##  8 Vesper mouse               Calomys     &lt;NA&gt;  Rodentia     &lt;NA&gt;        
##  9 Dog                        Canis       carni Carnivora    domesticated
## 10 Roe deer                   Capreolus   herbi Artiodactyla lc          
## # ‚Ä¶ with 73 more rows
```

---

## Filter


```r
msleep %&gt;% filter(order == "Carnivora")
```

```
## # A tibble: 12 x 11
##    name   genus vore  order conservation sleep_total sleep_rem sleep_cycle awake
##    &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;              &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt;
##  1 Cheet‚Ä¶ Acin‚Ä¶ carni Carn‚Ä¶ lc                  12.1      NA        NA      11.9
##  2 North‚Ä¶ Call‚Ä¶ carni Carn‚Ä¶ vu                   8.7       1.4       0.383  15.3
##  3 Dog    Canis carni Carn‚Ä¶ domesticated        10.1       2.9       0.333  13.9
##  4 Domes‚Ä¶ Felis carni Carn‚Ä¶ domesticated        12.5       3.2       0.417  11.5
##  5 Gray ‚Ä¶ Hali‚Ä¶ carni Carn‚Ä¶ lc                   6.2       1.5      NA      17.8
##  6 Tiger  Pant‚Ä¶ carni Carn‚Ä¶ en                  15.8      NA        NA       8.2
##  7 Jaguar Pant‚Ä¶ carni Carn‚Ä¶ nt                  10.4      NA        NA      13.6
##  8 Lion   Pant‚Ä¶ carni Carn‚Ä¶ vu                  13.5      NA        NA      10.5
##  9 Caspi‚Ä¶ Phoca carni Carn‚Ä¶ vu                   3.5       0.4      NA      20.5
## 10 Genet  Gene‚Ä¶ carni Carn‚Ä¶ &lt;NA&gt;                 6.3       1.3      NA      17.7
## 11 Arcti‚Ä¶ Vulp‚Ä¶ carni Carn‚Ä¶ &lt;NA&gt;                12.5      NA        NA      11.5
## 12 Red f‚Ä¶ Vulp‚Ä¶ carni Carn‚Ä¶ &lt;NA&gt;                 9.8       2.4       0.35   14.2
## # ‚Ä¶ with 2 more variables: brainwt &lt;dbl&gt;, bodywt &lt;dbl&gt;
```

---

## Filter


```r
msleep %&gt;% filter(order != "Carnivora")
```

```
## # A tibble: 71 x 11
##    name   genus vore  order conservation sleep_total sleep_rem sleep_cycle awake
##    &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;              &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt;
##  1 Owl m‚Ä¶ Aotus omni  Prim‚Ä¶ &lt;NA&gt;                17         1.8      NA       7  
##  2 Mount‚Ä¶ Aplo‚Ä¶ herbi Rode‚Ä¶ nt                  14.4       2.4      NA       9.6
##  3 Great‚Ä¶ Blar‚Ä¶ omni  Sori‚Ä¶ lc                  14.9       2.3       0.133   9.1
##  4 Cow    Bos   herbi Arti‚Ä¶ domesticated         4         0.7       0.667  20  
##  5 Three‚Ä¶ Brad‚Ä¶ herbi Pilo‚Ä¶ &lt;NA&gt;                14.4       2.2       0.767   9.6
##  6 Vespe‚Ä¶ Calo‚Ä¶ &lt;NA&gt;  Rode‚Ä¶ &lt;NA&gt;                 7        NA        NA      17  
##  7 Roe d‚Ä¶ Capr‚Ä¶ herbi Arti‚Ä¶ lc                   3        NA        NA      21  
##  8 Goat   Capri herbi Arti‚Ä¶ lc                   5.3       0.6      NA      18.7
##  9 Guine‚Ä¶ Cavis herbi Rode‚Ä¶ domesticated         9.4       0.8       0.217  14.6
## 10 Grivet Cerc‚Ä¶ omni  Prim‚Ä¶ lc                  10         0.7      NA      14  
## # ‚Ä¶ with 61 more rows, and 2 more variables: brainwt &lt;dbl&gt;, bodywt &lt;dbl&gt;
```

---

## Filter


```r
msleep %&gt;% filter(order != "Carnivora")
```

```
## # A tibble: 71 x 11
##    name   genus vore  order conservation sleep_total sleep_rem sleep_cycle awake
##    &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;              &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt;
##  1 Owl m‚Ä¶ Aotus omni  Prim‚Ä¶ &lt;NA&gt;                17         1.8      NA       7  
##  2 Mount‚Ä¶ Aplo‚Ä¶ herbi Rode‚Ä¶ nt                  14.4       2.4      NA       9.6
##  3 Great‚Ä¶ Blar‚Ä¶ omni  Sori‚Ä¶ lc                  14.9       2.3       0.133   9.1
##  4 Cow    Bos   herbi Arti‚Ä¶ domesticated         4         0.7       0.667  20  
##  5 Three‚Ä¶ Brad‚Ä¶ herbi Pilo‚Ä¶ &lt;NA&gt;                14.4       2.2       0.767   9.6
##  6 Vespe‚Ä¶ Calo‚Ä¶ &lt;NA&gt;  Rode‚Ä¶ &lt;NA&gt;                 7        NA        NA      17  
##  7 Roe d‚Ä¶ Capr‚Ä¶ herbi Arti‚Ä¶ lc                   3        NA        NA      21  
##  8 Goat   Capri herbi Arti‚Ä¶ lc                   5.3       0.6      NA      18.7
##  9 Guine‚Ä¶ Cavis herbi Rode‚Ä¶ domesticated         9.4       0.8       0.217  14.6
## 10 Grivet Cerc‚Ä¶ omni  Prim‚Ä¶ lc                  10         0.7      NA      14  
## # ‚Ä¶ with 61 more rows, and 2 more variables: brainwt &lt;dbl&gt;, bodywt &lt;dbl&gt;
```

---

## Filter


```r
msleep %&gt;% filter(order %in% c("Carnivora", "Primates"))
```

```
## # A tibble: 24 x 11
##    name   genus vore  order conservation sleep_total sleep_rem sleep_cycle awake
##    &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;              &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt;
##  1 Cheet‚Ä¶ Acin‚Ä¶ carni Carn‚Ä¶ lc                  12.1      NA        NA      11.9
##  2 Owl m‚Ä¶ Aotus omni  Prim‚Ä¶ &lt;NA&gt;                17         1.8      NA       7  
##  3 North‚Ä¶ Call‚Ä¶ carni Carn‚Ä¶ vu                   8.7       1.4       0.383  15.3
##  4 Dog    Canis carni Carn‚Ä¶ domesticated        10.1       2.9       0.333  13.9
##  5 Grivet Cerc‚Ä¶ omni  Prim‚Ä¶ lc                  10         0.7      NA      14  
##  6 Patas‚Ä¶ Eryt‚Ä¶ omni  Prim‚Ä¶ lc                  10.9       1.1      NA      13.1
##  7 Domes‚Ä¶ Felis carni Carn‚Ä¶ domesticated        12.5       3.2       0.417  11.5
##  8 Galago Gala‚Ä¶ omni  Prim‚Ä¶ &lt;NA&gt;                 9.8       1.1       0.55   14.2
##  9 Gray ‚Ä¶ Hali‚Ä¶ carni Carn‚Ä¶ lc                   6.2       1.5      NA      17.8
## 10 Human  Homo  omni  Prim‚Ä¶ &lt;NA&gt;                 8         1.9       1.5    16  
## # ‚Ä¶ with 14 more rows, and 2 more variables: brainwt &lt;dbl&gt;, bodywt &lt;dbl&gt;
```

---

## Filter


```r
msleep %&gt;% filter(sleep_total &gt;= 16)
```

```
## # A tibble: 8 x 11
##   name   genus  vore  order conservation sleep_total sleep_rem sleep_cycle awake
##   &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;              &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt;
## 1 Owl m‚Ä¶ Aotus  omni  Prim‚Ä¶ &lt;NA&gt;                17         1.8      NA       7  
## 2 Long-‚Ä¶ Dasyp‚Ä¶ carni Cing‚Ä¶ lc                  17.4       3.1       0.383   6.6
## 3 North‚Ä¶ Didel‚Ä¶ omni  Dide‚Ä¶ lc                  18         4.9       0.333   6  
## 4 Big b‚Ä¶ Eptes‚Ä¶ inse‚Ä¶ Chir‚Ä¶ lc                  19.7       3.9       0.117   4.3
## 5 Thick‚Ä¶ Lutre‚Ä¶ carni Dide‚Ä¶ lc                  19.4       6.6      NA       4.6
## 6 Littl‚Ä¶ Myotis inse‚Ä¶ Chir‚Ä¶ &lt;NA&gt;                19.9       2         0.2     4.1
## 7 Giant‚Ä¶ Priod‚Ä¶ inse‚Ä¶ Cing‚Ä¶ en                  18.1       6.1      NA       5.9
## 8 Arcti‚Ä¶ Sperm‚Ä¶ herbi Rode‚Ä¶ lc                  16.6      NA        NA       7.4
## # ‚Ä¶ with 2 more variables: brainwt &lt;dbl&gt;, bodywt &lt;dbl&gt;
```

---

## Filter


```r
msleep %&gt;% filter(sleep_total &lt;= 3)
```

```
## # A tibble: 4 x 11
##   name   genus  vore  order conservation sleep_total sleep_rem sleep_cycle awake
##   &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;              &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt;
## 1 Roe d‚Ä¶ Capre‚Ä¶ herbi Arti‚Ä¶ lc                   3        NA            NA  21  
## 2 Horse  Equus  herbi Peri‚Ä¶ domesticated         2.9       0.6           1  21.1
## 3 Giraf‚Ä¶ Giraf‚Ä¶ herbi Arti‚Ä¶ cd                   1.9       0.4          NA  22.1
## 4 Pilot‚Ä¶ Globi‚Ä¶ carni Ceta‚Ä¶ cd                   2.7       0.1          NA  21.4
## # ‚Ä¶ with 2 more variables: brainwt &lt;dbl&gt;, bodywt &lt;dbl&gt;
```

---

## Filter


```r
msleep %&gt;% filter(sleep_total %in% 15:20)
```

```
## # A tibble: 2 x 11
##   name    genus vore  order conservation sleep_total sleep_rem sleep_cycle awake
##   &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;              &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt;
## 1 Owl mo‚Ä¶ Aotus omni  Prim‚Ä¶ &lt;NA&gt;                  17       1.8      NA         7
## 2 North ‚Ä¶ Dide‚Ä¶ omni  Dide‚Ä¶ lc                    18       4.9       0.333     6
## # ‚Ä¶ with 2 more variables: brainwt &lt;dbl&gt;, bodywt &lt;dbl&gt;
```

---

## group_by y summarise (summarize)


```r
msleep %&gt;% 
  group_by(order) %&gt;% 
  summarise(promedio = mean(sleep_total)) 
```

```
##   promedio
## 1 10.43373
```

---

## group_by y summarise (summarize)


```r
msleep %&gt;% 
  group_by(conservation, order) %&gt;% 
  summarise(promedio = mean(sleep_total)) %&gt;% 
  head(4)
```

```
##   promedio
## 1 10.43373
```

---

## group_by y summarise (summarize)


```r
msleep %&gt;% 
  group_by(conservation, order) %&gt;% 
  summarise(desviacion_estandar = sd(sleep_total))
```

```
##   desviacion_estandar
## 1            4.450357
```

---

## group_by y summarise (summarize)


```r
msleep %&gt;% 
  group_by(conservation, order) %&gt;% 
  summarise(promedio = mean(sleep_total),
            desviacion_estandar = sd(sleep_total))
```

```
##   promedio desviacion_estandar
## 1 10.43373            4.450357
```

---

## group_by y summarise (summarize)


```r
library(plotrix)

msleep %&gt;% 
  group_by(conservation, order) %&gt;% 
  summarise(promedio = mean(sleep_total),
            desviacion_estandar = sd(sleep_total),
            erorr_estandar = std.error(sleep_total)) 
```

```
##   promedio desviacion_estandar erorr_estandar
## 1 10.43373            4.450357      0.4884901
```

---

## group_by y summarise (summarize)


```r
msleep %&gt;% 
  group_by(conservation, order) %&gt;% 
  summarise(promedio = mean(sleep_total),
            desviacion_estandar = sd(sleep_total),
            erorr_estandar = std.error(sleep_total)) 
```

```
##   promedio desviacion_estandar erorr_estandar
## 1 10.43373            4.450357      0.4884901
```

---

## mutate


```r
ms_sleep2 &lt;- msleep %&gt;% 
  select(order, genus, sleep_total) %&gt;% 
  mutate(sue√±o_maximo = max(sleep_total))

ms_sleep2
```

```
## # A tibble: 83 x 4
##    order        genus       sleep_total sue√±o_maximo
##    &lt;chr&gt;        &lt;chr&gt;             &lt;dbl&gt;        &lt;dbl&gt;
##  1 Carnivora    Acinonyx           12.1         19.9
##  2 Primates     Aotus              17           19.9
##  3 Rodentia     Aplodontia         14.4         19.9
##  4 Soricomorpha Blarina            14.9         19.9
##  5 Artiodactyla Bos                 4           19.9
##  6 Pilosa       Bradypus           14.4         19.9
##  7 Carnivora    Callorhinus         8.7         19.9
##  8 Rodentia     Calomys             7           19.9
##  9 Carnivora    Canis              10.1         19.9
## 10 Artiodactyla Capreolus           3           19.9
## # ‚Ä¶ with 73 more rows
```

---

## mutate


```r
ms_sleep2 %&gt;% 
  select(order, genus, sleep_total, sue√±o_maximo) %&gt;% 
  mutate(diferencia_sue√±o = sue√±o_maximo - sleep_total) %&gt;% 
  head(3)
```

```
## # A tibble: 3 x 5
##   order     genus      sleep_total sue√±o_maximo diferencia_sue√±o
##   &lt;chr&gt;     &lt;chr&gt;            &lt;dbl&gt;        &lt;dbl&gt;            &lt;dbl&gt;
## 1 Carnivora Acinonyx          12.1         19.9             7.80
## 2 Primates  Aotus             17           19.9             2.90
## 3 Rodentia  Aplodontia        14.4         19.9             5.50
```

---

## Rename


```r
ms_sleep2 %&gt;% 
  dplyr::rename(orden = order, Genero = genus, total = sleep_total, maximo = sue√±o_maximo)
```

```
## # A tibble: 83 x 4
##    orden        Genero      total maximo
##    &lt;chr&gt;        &lt;chr&gt;       &lt;dbl&gt;  &lt;dbl&gt;
##  1 Carnivora    Acinonyx     12.1   19.9
##  2 Primates     Aotus        17     19.9
##  3 Rodentia     Aplodontia   14.4   19.9
##  4 Soricomorpha Blarina      14.9   19.9
##  5 Artiodactyla Bos           4     19.9
##  6 Pilosa       Bradypus     14.4   19.9
##  7 Carnivora    Callorhinus   8.7   19.9
##  8 Rodentia     Calomys       7     19.9
##  9 Carnivora    Canis        10.1   19.9
## 10 Artiodactyla Capreolus     3     19.9
## # ‚Ä¶ with 73 more rows
```


---

class:center,inverse,middle
# Practica: Data de insectos



---

class: center, inverse, middle
# Dudas ü§î

---

# Pero antes...ü§î
- example(): Un ejemplo de R sobre cualquier comando

- [**Swirl**](https://swirlstats.com/students.html): Paquete para aprender R &lt;3

- help(): Pedir ayuda en R (muestra info relacionada al comando)

- Stackoverflow: Comunidad comprometida

- Cheatsheet: [Basic](https://www.rstudio.com/wp-content/uploads/2016/10/r-cheat-sheet-3.pdf); [Dplyr](https://www.rstudio.com/wp-content/uploads/2015/02/data-wrangling-cheatsheet.pdf); [ggplot2](https://www.rstudio.com/wp-content/uploads/2015/03/ggplot2-cheatsheet.pdf)

---

class: center, inverse, middle
# Fin üë®‚Äçüíª

---
class: center, inverse, middle
# An√°lisis de la diversidad biol√≥gica üêúüêöü¶áü¶Å

---

## ¬øBiodiversidad o diversidad biol√≥gica?: [Origen del t√©rmino](https://academic.oup.com/bioscience/article-abstract/71/9/893/6312537)
&lt;center&gt;
&lt;img src="images/historia.png" class="center"/&gt;
&lt;/center&gt;

---

## Escalas de estudio
&lt;center&gt;
&lt;img src="images/escalas_diversidad.png" class="center" style = "width: 120%" /&gt;
&lt;/center&gt;

---

## Componentes y escalas de la diversidad espec√≠fica
&lt;center&gt;
&lt;img src="images/escalas_diversidad_especifica.png" class="center"/&gt;
&lt;/center&gt;

---

## Diversidad: alfa, beta, gamma
&lt;center&gt;
&lt;img src="images/diversidad_ejemplo.jpg" class="center"/&gt;
&lt;/center&gt;

---

## Diversidad: alfa, beta, gamma
&lt;center&gt;
&lt;img src="images/diversidad_ejemplo4.png" class="center"/&gt;
&lt;/center&gt;

---

## Diversidad: alfa, beta, gamma
&lt;center&gt;
&lt;img src="images/diversidad_ejemplo2.jpg" class="center"/&gt;
&lt;/center&gt;

---

## Diversidad: alfa, beta, gamma
&lt;center&gt;
&lt;img src="images/diversidad_ejemplo3.jpg" style = "width: 80%" /&gt;
&lt;/center&gt;

---

class:center, inverse, middle
# ¬øPor qu√© se ha insistido tanto en cuantificar el valor de importancia de cada especie?
# ¬øPor qu√© considerar a una comunidad m√°s equitativa como una comunidad m√°s diversa?
# N√∫mero de especies, distribuci√≥n de la abundancia, dominancia de especies 
---

## ¬øQu√© comunidad es m√°s diversa?
&lt;center&gt;
&lt;img src="images/comparacion_2.png" style = "width: 110%" /&gt;
&lt;/center&gt;

---

## ¬øQu√© comunidad es m√°s diversa?
&lt;center&gt;
&lt;img src="images/comparacion_1.png" style = "width: 110%" /&gt;
&lt;/center&gt;

---

## Principios b√°sicos para medir la diversidad biol√≥gica

- Expertis en la determinaci√≥n taxon√≥mica (infraespec√≠fico)

- Dise√±o ecol√≥gico adecuado

- R√©plicas de cada muestra (evitar las [pseudor√©plicas](https://esajournals.onlinelibrary.wiley.com/doi/10.2307/1942661)) 
- √çndice de diversidad m√°s medida de dispersi√≥n (iNEXT)

- La intensidad de muestreo puede variar, pero el m√©todo de colecta no. 

- Tipos de h√°bitat donde se obtienen las muestras deben ser similares.

---

## Medici√≥n de la diversidad alfa ([Moreno](http://entomologia.rediris.es/sea/manytes/metodos.pdf), 2003)
&lt;center&gt;
&lt;img src="images/medicion_diversidad_alfa.png" style = "width: 60%" /&gt;
&lt;/center&gt;

---

## 1) Riqueza espec√≠fca: 1.1) √≠ndices, 1.2) rarefacci√≥n, 1.3) funciones de acumulaci√≥n, 1.4) m√©todos no param√©tricos
## 1.1.1) Riqueza de especies (S)

```r
sp1 &lt;- c(5, 0, 0, 0, 0, 0, 0, 0, 0, 0)
sp2 &lt;- c(0, 0, 0, 0, 0, 29, 0, 0, 0, 0)
sp3 &lt;- c(0, 0, 0, 0, 6, 12, 21, 0, 0, 0)
sp4 &lt;- c(65, 25, 6, 0, 0, 0, 0, 0, 60, 72)
sp5 &lt;- c(5, 39, 42, 0, 0, 0, 0, 13, 47, 34)
sp6 &lt;- c(0, 0, 0, 0, 0, 0, 5, 0, 0, 0)
sp7 &lt;- c(0, 6, 6, 0, 0, 0, 0, 6, 4, 0)
sp8 &lt;- c(0, 23, 31, 40, 34, 0, 0, 37, 0, 0)
sp9 &lt;- c(0, 0, 0, 0, 18, 22, 20, 0, 0, 0)
sp10 &lt;- c(0, 0, 0, 14, 12, 0, 0, 0, 0, 0)
sitios &lt;- c("sitio1", "sitio2", "sitio3", "sitio4", "sitio5", "sitio6", "sitio7", 
    "sitio8", "sitio9", "sitio10")
datadiversidad &lt;- data.frame(sitios, sp1, sp2, sp3, sp4, sp5, sp6, sp7, sp8, sp9, 
    sp10)
```

---

## Riqueza de especies (S)

```r
df_peces &lt;- read.csv("/home/biologisturiel/Descargas/data/data_peces.csv")

lagunas &lt;- df_peces$Especies

df_peces_2 &lt;- as.data.frame(t(df_peces[,-1]))

colnames(df_peces_2) &lt;- lagunas

df_peces_2$lagunas &lt;- factor(row.names(df_peces_2))

glimpse(df_peces_2) 
```

```
## Rows: 6
## Columns: 8
## $ Andinoacara_stalsbergi    &lt;int&gt; 1, 0, 0, 0, 0, 0
## $ Oreochromis_niloticus     &lt;int&gt; 9, 0, 0, 1, 0, 5
## $ Poecilia_reticulata       &lt;int&gt; 19, 0, 2, 6, 28, 0
## $ Poecilia_latipinna        &lt;int&gt; 0, 0, 0, 0, 6, 0
## $ Poecilia_velifera         &lt;int&gt; 0, 0, 0, 0, 1, 0
## $ Bryconamericus_peruanus   &lt;int&gt; 15, 30, 0, 1, 0, 60
## $ Amatitlania_nigrofasciata &lt;int&gt; 0, 16, 0, 1, 0, 0
## $ lagunas                   &lt;fct&gt; Laguna.1, Laguna.2, Laguna.4, Laguna.6, Lagu‚Ä¶
```

---

## Riqueza de especies (S)


```r
S &lt;- apply(df_peces_2[,-8] &gt; 0, 1, sum)

S
```

```
## Laguna.1 Laguna.2 Laguna.4 Laguna.6 Laguna.8 Laguna.9 
##        4        2        1        4        3        2
```

--


```r
library(vegan)
specnumber(df_peces_2[, -8])
```

```
## Laguna.1 Laguna.2 Laguna.4 Laguna.6 Laguna.8 Laguna.9 
##        4        2        1        4        3        2
```

---
## √çndice de diversidad de Margalef
$$
D_{MG}=\frac{S - 1}{ln(N)}
$$

--


```r
N &lt;- apply(df_peces_2[, -8], 1, sum)

margalef &lt;- (S-1)/log(N)

margalef
```

```
##  Laguna.1  Laguna.2  Laguna.4  Laguna.6  Laguna.8  Laguna.9 
## 0.7927721 0.2611893 0.0000000 1.3653588 0.5625328 0.2395561
```

---
## √çndice de diversidad de Menhinick
$$
D_{Mn}=\frac{S}{\sqrt(N)}
$$
--


```r
menhinick &lt;- S/sqrt(N)
menhinick
```

```
##  Laguna.1  Laguna.2  Laguna.4  Laguna.6  Laguna.8  Laguna.9 
## 0.6030227 0.2948839 0.7071068 1.3333333 0.5070926 0.2480695
```

---

## Ploteando la riqueza de especies (S)

```r
alpha &lt;- cbind(lagunas = df_peces_2$lagunas, riqueza = S, margalef = margalef, menhinick = margalef)

rownames(alpha) &lt;- NULL

alpha_2 &lt;- alpha %&gt;% as.data.frame()
```

--


```r
alpha_2
```

```
##   lagunas riqueza  margalef menhinick
## 1       1       4 0.7927721 0.7927721
## 2       2       2 0.2611893 0.2611893
## 3       3       1 0.0000000 0.0000000
## 4       4       4 1.3653588 1.3653588
## 5       5       3 0.5625328 0.5625328
## 6       6       2 0.2395561 0.2395561
```

---

## Ploteando los √≠ndices de diversidad alfa


```r
riqueza_especifica &lt;- expression(paste("Riqueza espec√≠fica ", italic("S")))

library(ggthemes)

plot_riqueza &lt;- ggplot(data = alpha_2, mapping = aes(x = lagunas, y = S, colour = as.factor(lagunas))) + 
  geom_point(size = 2) +
  theme_bw() +
  xlab("Lagunas") + 
  ylab(riqueza_especifica) + 
  labs(colour = "Lagunas") + 
  scale_x_continuous(breaks = seq(1, 6, by = 1)) + 
  theme(legend.position = "none")
```

---

## Obtener la clasificaci√≥n taxon√≥mica de las especies encontradas


```r
library(taxize)
# taxonomia &lt;- tax_name(query = (df_peces$Especies), get = c("class", "order", "family", "genus"), db = "itis")

# df_peces_taxonommia &lt;- cbind(taxonomia, df_peces)

df_peces_taxonomia2 &lt;- read.csv("/home/biologisturiel/Descargas/df_peces_taxonommia.csv")

df_peces_taxonomia3 &lt;- df_peces_taxonomia2 %&gt;% 
mutate(sumVar = rowSums(select(., contains("laguna")))) %&gt;% 
  select(class, order, family, genus, query, sumVar)
```


---

## Ploteando el n√∫mero de especies por nivel taxon√≥mico

.panelset[
.panel[.panel-name[Plot]
&lt;center&gt;
&lt;img src = "images/Rplot_metacoder.jpeg" style = "width:92%" /&gt;
&lt;/center&gt;
]

.panel[.panel-name[C√≥digo]

```r
library(metacoder)

metacoder &lt;- parse_tax_data(df_peces_taxonomia3, class_cols = c(1:5), named_by_rank = TRUE)

plot_metacoder &lt;- metacoder %&gt;% 
  filter_taxa(taxon_ranks != "specificEpithet") %&gt;% 
  filter_taxa(!is.na(taxon_names)) %&gt;% 
  filter_taxa(taxon_names == "Teleostei", subtaxa = TRUE) %&gt;%
  filter_taxa(taxon_ranks == "order", n_subtaxa &lt; 8, subtaxa = TRUE, supertaxa = T) %&gt;%
  heat_tree(node_label = taxon_names, node_color = n_obs, node_size = n_obs, node_color_axis_label = "Ocurrencias", initial_layout = "re", layout = "da")

```
]]

---

## Plots de abundancia relativa


```r
library(gsheet)
data_ento &lt;- gsheet2tbl('https://docs.google.com/spreadsheets/d/13gV_HUqe55328loEn0XPaxxG7-pNbpZ9/edit#gid=1922099029')
```

```
## Warning: Missing column names filled in: 'X5' [5], 'X6' [6], 'X7' [7], 'X8' [8],
## 'X9' [9], 'X10' [10]
```

```r
data_ento_2 &lt;- data_ento %&gt;% select(PUNTO, ORDEN, FAMILIA, ABUNDANCIA) 

data_ento_3 &lt;- data_ento_2 %&gt;% mutate(Comunidad = 
                ifelse(grepl("T", PUNTO), "Totoral", 
                ifelse(grepl("J", PUNTO), "Juncal", 
                ifelse(grepl("G", PUNTO), "Gramadal", "Otro"))))


totoral_relativo &lt;- data_ento_3 %&gt;% filter(Comunidad == "Totoral") %&gt;% as.data.frame()

juncal_relativo &lt;- data_ento_3 %&gt;% filter(Comunidad == "Juncal") %&gt;% as.data.frame()

gramadal_relativo &lt;- data_ento_3 %&gt;% filter(Comunidad == "Gramadal") %&gt;% as.data.frame()
```


---

## Plots de abundancia relativa


```r
library(DataExplorer)
#plot_missing(totoral_relativo)
#plot_missing(juncal_relativo)
#plot_missing(gramadal_relativo)

totoral_relativo &lt;- drop_na(totoral_relativo)
juncal_relativo &lt;- drop_na(juncal_relativo)
gramadal_relativo &lt;- drop_na(gramadal_relativo)


data_porcentaje_totoral &lt;- totoral_relativo %&gt;% 
  mutate(total = sum(totoral_relativo[1:60, 4]), porc = (ABUNDANCIA/total)*100)

data_porcentaje_juncal &lt;- juncal_relativo %&gt;% mutate(total = sum(juncal_relativo[1:74, 4]), porc = (ABUNDANCIA/total)*100)

data_porcentaje_gramadal &lt;- gramadal_relativo %&gt;% mutate(total = sum(gramadal_relativo[1:58, 4])) %&gt;% mutate(porc = (ABUNDANCIA/total)*100)

data_ento_porc &lt;- rbind(data_porcentaje_totoral, data_porcentaje_juncal, data_porcentaje_gramadal)
```

---

## Plots de abundancia relativa


```r
library(ggsci)

plot_barras_frec_relativo &lt;- ggplot(data = data_ento_porc, mapping = aes(x = FAMILIA, y = porc, fill = ORDEN)) + 
  geom_col() + 
  coord_flip() + 
  facet_wrap(.~Comunidad, scales = "free") + 
  theme_bw() + 
  xlab("Familias") + 
  ylab("Frecuencia relativa") + 
  labs(fill = "Orden") + 
  scale_fill_npg() 
```

---

## Ordenando data para rarefacci√≥n

```r
data_ento_porc2 &lt;- data_ento_porc %&gt;% distinct()

data_ento_porc_3 &lt;- data_ento_porc2 %&gt;% spread(key = ORDEN, value = ABUNDANCIA)

data_ento_porc_3[is.na(data_ento_porc_3)] &lt;- 0
data_ento_porc_3
```

```
##     PUNTO         FAMILIA Comunidad total        porc Blattodea Coleoptera
## 1   G1A24        Asilidae  Gramadal   113  0.88495575         0          0
## 2   G1A24    Chironomidae  Gramadal   113  0.88495575         0          0
## 3   G1A24        Fannidae  Gramadal   113  0.88495575         0          0
## 4   G1A24    Scarabaeidae  Gramadal   113  0.88495575         0          1
## 5   G1A48    Chironomidae  Gramadal   113  1.76991150         0          0
## 6   G1A48    Cicadellidae  Gramadal   113  0.88495575         0          0
## 7   G1A48    Ectopsocidae  Gramadal   113  0.88495575         0          0
## 8   G1A48        Tineidae  Gramadal   113  0.88495575         0          0
## 9   G1A72     Brachonidae  Gramadal   113  0.88495575         0          0
## 10  G1A72    Ectopsocidae  Gramadal   113  0.88495575         0          0
## 11  G1P24    Cerambycidae  Gramadal   113  0.88495575         0          1
## 12  G1P24   Chrysomelidae  Gramadal   113  2.65486726         0          3
## 13  G1P48    Ectopsocidae  Gramadal   113  1.76991150         0          0
## 14  G1P48      Formicidae  Gramadal   113  0.88495575         0          0
## 15  G1P48        Tineidae  Gramadal   113  0.88495575         0          0
## 16  G1P72    Cerambycidae  Gramadal   113  0.88495575         0          1
## 17  G1P72   Crysomellidae  Gramadal   113  1.76991150         0          2
## 18  G1P72      Formicidae  Gramadal   113  5.30973451         0          0
## 19  G1P72     Pompyllidae  Gramadal   113  0.88495575         0          0
## 20  G2A24   Cecidomyiidae  Gramadal   113  0.88495575         0          0
## 21  G2A24    Cicadellidae  Gramadal   113  2.65486726         0          0
## 22  G2A24  Dolichopodidae  Gramadal   113  1.76991150         0          0
## 23  G2A24      Elateridae  Gramadal   113  0.88495575         0          1
## 24  G2P24      Braconidae  Gramadal   113  0.88495575         0          0
## 25  G2P24   Chrysomelidae  Gramadal   113  0.88495575         0          1
## 26  G2P24    Cicadellidae  Gramadal   113  7.96460177         0          0
## 27  G2P24  Dolichopodidae  Gramadal   113  0.88495575         0          0
## 28  G2P24       Gryllidae  Gramadal   113  1.76991150         0          0
## 29  G2P48     Brachonidae  Gramadal   113  0.88495575         0          0
## 30  G2P48       Carabidae  Gramadal   113  0.88495575         0          1
## 31  G2P48    Cicadellidae  Gramadal   113  5.30973451         0          0
## 32  G2P48       Culicidae  Gramadal   113  0.88495575         0          0
## 33  G2P48  Dolichopodidae  Gramadal   113  0.88495575         0          0
## 34  G2P48    Ectopsocidae  Gramadal   113  1.76991150         0          0
## 35  G2P48        Muscidae  Gramadal   113  0.88495575         0          0
## 36  G2P48       Sciaridae  Gramadal   113  6.19469027         0          0
## 37  G2P72      Braconidae  Gramadal   113  0.88495575         0          0
## 38  G2P72       Carabidae  Gramadal   113  0.88495575         0          1
## 39  G2P72   Chrysomelidae  Gramadal   113  1.76991150         0          2
## 40  G2P72    Cicadellidae  Gramadal   113  0.88495575         0          0
## 41  G2P72      Elateridae  Gramadal   113  1.76991150         0          2
## 42  G2P72     Scatopsidae  Gramadal   113  0.88495575         0          0
## 43  G3A24   Cecidomyiidae  Gramadal   113  0.88495575         0          0
## 44  G3A24  Chrysomellidae  Gramadal   113  3.53982301         0          4
## 45  G3A24    Cicadellidae  Gramadal   113  2.65486726         0          0
## 46  G3A24  Dolichopodidae  Gramadal   113  4.42477876         0          0
## 47  G3A24      Elateridae  Gramadal   113  0.88495575         0          1
## 48  G3A24       Gryllidae  Gramadal   113  0.88495575         0          0
## 49  G3A24     Latridiidae  Gramadal   113  0.88495575         0          1
## 50  G3A24     Scatopsidae  Gramadal   113  7.96460177         0          0
## 51  G3A24       Sciaridae  Gramadal   113  0.88495575         0          0
## 52  G3A48      Formicidae  Gramadal   113  0.88495575         0          0
## 53  G3A72      Diptera_ND  Gramadal   113  0.88495575         0          0
## 54  G3P24       Blattidae  Gramadal   113  0.88495575         1          0
## 55  G3P24       Gryllidae  Gramadal   113  2.65486726         0          0
## 56  G3P72   Chrysomelidae  Gramadal   113  0.88495575         0          1
## 57  G3P72      Elateridae  Gramadal   113  0.88495575         0          1
## 58  G3P72       Gryllidae  Gramadal   113  0.88495575         0          0
## 59  J1A24     Brachonidae    Juncal  1675  0.05970149         0          0
## 60  J1A24  Dolichopodidae    Juncal  1675  0.11940299         0          0
## 61  J1A24     Scatopsidae    Juncal  1675  0.11940299         0          0
## 62  J1A28    Chironomidae    Juncal  1675  0.11940299         0          0
## 63  J1A28  Dolichopodidae    Juncal  1675  0.05970149         0          0
## 64  J1A28     Scatopsidae    Juncal  1675  0.47761194         0          0
## 65  J1A72  Dolichopodidae    Juncal  1675  0.59701493         0          0
## 66  J1A72     Hesperiidae    Juncal  1675  0.05970149         0          0
## 67  J1A72     Scatopsidae    Juncal  1675  0.35820896         0          0
## 68  J1P24       Blatiidae    Juncal  1675  0.05970149         1          0
## 69  J1P24      Braconidae    Juncal  1675  0.05970149         0          0
## 70  J1P24   Chrysomelidae    Juncal  1675  0.05970149         0          1
## 71  J1P24    Cicadellidae    Juncal  1675  0.05970149         0          0
## 72  J1P24      Formicidae    Juncal  1675  0.11940299         0          0
## 73  J1P48    Cicadellidae    Juncal  1675  0.05970149         0          0
## 74  J1P48  Drosophillidae    Juncal  1675  0.05970149         0          0
## 75  J1P48      Formicidae    Juncal  1675  0.11940299         0          0
## 76  J1P72       Aphididae    Juncal  1675  0.05970149         0          0
## 77  J1P72   Cecidomyiidae    Juncal  1675  0.11940299         0          0
## 78  J1P72 Ceratopogonidae    Juncal  1675  0.29850746         0          0
## 79  J1P72  Chrysomellidae    Juncal  1675  0.05970149         0          1
## 80  J1P72    Ectopsocidae    Juncal  1675  0.11940299         0          0
## 81  J1P72      Formicidae    Juncal  1675  0.11940299         0          0
## 82  J1P72        Phoridae    Juncal  1675  0.17910448         0          0
## 83  J2A24        Muscidae    Juncal  1675  0.05970149         0          0
## 84  J2A48     Aphelinidae    Juncal  1675  0.05970149         0          0
## 85  J2A48          Apidae    Juncal  1675  0.05970149         0          0
## 86  J2A48    Chironomidae    Juncal  1675  0.11940299         0          0
## 87  J2A48      Ephydridae    Juncal  1675  0.05970149         0          0
## 88  J2A48      Eulophidae    Juncal  1675  0.05970149         0          0
## 89  J2A48      Formicidae    Juncal  1675  0.53731343         0          0
## 90  J2A48    Pteromalidae    Juncal  1675  0.05970149         0          0
## 91  J2A48     Scatopsidae    Juncal  1675  0.11940299         0          0
## 92  J2A48       Syrphidae    Juncal  1675  0.05970149         0          0
## 93  J2A72       Aphididae    Juncal  1675  0.05970149         0          0
## 94  J2A72   Cecidomyiidae    Juncal  1675  0.05970149         0          0
## 95  J2A72      Diptera_ND    Juncal  1675  0.23880597         0          0
## 96  J2A72   Drosophilidae    Juncal  1675  0.05970149         0          0
## 97  J2A72      Formicidae    Juncal  1675  0.05970149         0          0
## 98  J2A72      Formicidae    Juncal  1675  0.23880597         0          0
## 99  J2A72       Gryllidae    Juncal  1675  0.05970149         0          0
## 100 J2A72     Psoquilidae    Juncal  1675  0.05970149         0          0
## 101 J2A72     Scatopsidae    Juncal  1675  0.17910448         0          0
## 102 J2P24       Blattidae    Juncal  1675  0.05970149         1          0
## 103 J2P24  Chrysomellidae    Juncal  1675  0.29850746         0          5
## 104 J2P24   Coccinellidae    Juncal  1675  0.05970149         0          1
## 105 J2P24      Formicidae    Juncal  1675  1.79104478         0          0
## 106 J2P24       Gryllidae    Juncal  1675  0.17910448         0          0
## 107 J2P24  Lepidoptera_ND    Juncal  1675  0.05970149         0          0
## 108 J2P48       Carabidae    Juncal  1675  0.05970149         0          1
## 109 J2P48   Chrysomelidae    Juncal  1675  0.83582090         0         14
## 110 J2P48      Formicidae    Juncal  1675 19.52238806         0          0
## 111 J2P48       Gryllidae    Juncal  1675  0.11940299         0          0
## 112 J2P72       Blatiidae    Juncal  1675  0.05970149         1          0
## 113 J2P72   Chrysomelidae    Juncal  1675  0.23880597         0          4
## 114 J2P72      Formicidae    Juncal  1675 67.70149254         0          0
## 115 J2P72       Gryllidae    Juncal  1675  0.05970149         0          0
## 116 J2P72      Pompilidae    Juncal  1675  0.05970149         0          0
## 117 J3A24      Diapriidae    Juncal  1675  0.05970149         0          0
## 118 J3A24  Dolichopodidae    Juncal  1675  0.29850746         0          0
## 119 J3A24      Formicidae    Juncal  1675  0.35820896         0          0
## 120 J3A24  Lepidoptera_ND    Juncal  1675  0.05970149         0          0
## 121 J3A48   Cecidomyiidae    Juncal  1675  0.05970149         0          0
## 122 J3A48      Diptera_ND    Juncal  1675  0.05970149         0          0
## 123 J3A72      Formicidae    Juncal  1675  1.67164179         0          0
## 124 J3A72     Scatopsidae    Juncal  1675  0.05970149         0          0
## 125 J3P48    Cicadellidae    Juncal  1675  0.05970149         0          0
## 126 J3P48      Formicidae    Juncal  1675  0.05970149         0          0
## 127 J3P48       Gryllidae    Juncal  1675  0.11940299         0          0
## 128 J3P48       Pyralidae    Juncal  1675  0.05970149         0          0
## 129 J3P48   Stratiomyidae    Juncal  1675  0.05970149         0          0
## 130 J3P72  Dolichopodidae    Juncal  1675  0.05970149         0          0
## 131 J3P72       Gryllidae    Juncal  1675  0.05970149         0          0
## 132 J3P72     Scatopsidae    Juncal  1675  0.05970149         0          0
## 133 T1A24    Chironomidae   Totoral   245 11.83673469         0          0
## 134 T1A24      Diapriidae   Totoral   245  0.40816327         0          0
## 135 T1A24  Dolichopodidae   Totoral   245  1.22448980         0          0
## 136 T1A24      Formicidae   Totoral   245  0.40816327         0          0
## 137 T1A24     Scatopsidae   Totoral   245  1.63265306         0          0
## 138 T1A48      Diptera_ND   Totoral   245 18.36734694         0          0
## 139 T1A48      Formicidae   Totoral   245  1.22448980         0          0
## 140 T1A48  Lepidoptera_ND   Totoral   245  0.40816327         0          0
## 141 T1A72       Aphididae   Totoral   245  1.22448980         0          0
## 142 T1A72    Chironomidae   Totoral   245  1.63265306         0          0
## 143 T1A72  Dolichopodidae   Totoral   245  5.30612245         0          0
## 144 T1A72        Phoridae   Totoral   245  5.71428571         0          0
## 145 T1A72       Pyralidae   Totoral   245  0.40816327         0          0
## 146 T1P24   Cecidomyiidae   Totoral   245  3.26530612         0          0
## 147 T1P24 Ceratopogonidae   Totoral   245  0.81632653         0          0
## 148 T1P24      Diapriidae   Totoral   245  0.40816327         0          0
## 149 T1P24      Diptera_ND   Totoral   245  0.40816327         0          0
## 150 T1P72   Cecidomyiidae   Totoral   245  0.40816327         0          0
## 151 T1P72      Diptera_ND   Totoral   245  0.81632653         0          0
## 152 T1P72      Formicidae   Totoral   245  0.40816327         0          0
## 153 T1P72        Labiidae   Totoral   245  0.40816327         0          0
## 154 T1P72   Palaephatidae   Totoral   245  0.40816327         0          0
## 155 T1P72       Sciaridae   Totoral   245  0.40816327         0          0
## 156 T2A24       Gryllidae   Totoral   245  0.40816327         0          0
## 157 T2A24       Hybotidae   Totoral   245  1.22448980         0          0
## 158 T2A48  Dolichopodidae   Totoral   245  0.81632653         0          0
## 159 T2A48        Phoridae   Totoral   245  0.40816327         0          0
## 160 T2A48    Sphaerocidae   Totoral   245  1.63265306         0          0
## 161 T2P24     Geometridae   Totoral   245  0.40816327         0          0
## 162 T2P24       Gryllidae   Totoral   245  0.40816327         0          0
## 163 T2P24        Phoridae   Totoral   245  0.81632653         0          0
## 164 T2P48       Blatiidae   Totoral   245  0.40816327         1          0
## 165 T2P48   Cecidomyiidae   Totoral   245  0.40816327         0          0
## 166 T2P48      Formicidae   Totoral   245  0.81632653         0          0
## 167 T2P48     Gelechiidae   Totoral   245  0.40816327         0          0
## 168 T2P48    Scarabaeidae   Totoral   245  0.40816327         0          1
## 169 T2P72       Aphididae   Totoral   245  0.40816327         0          0
## 170 T2P72       Culicidae   Totoral   245  0.40816327         0          0
## 171 T2P72      Diptera_ND   Totoral   245  0.40816327         0          0
## 172 T2P72      Formicidae   Totoral   245  0.81632653         0          0
## 173 T2P72 Lygistorhinidae   Totoral   245  0.81632653         0          0
## 174 T3A48     Aphelinidae   Totoral   245  0.40816327         0          0
## 175 T3A48       Aphididae   Totoral   245  1.63265306         0          0
## 176 T3A48   Cecidomyiidae   Totoral   245  0.40816327         0          0
## 177 T3A48 Ceratopogonidae   Totoral   245  0.40816327         0          0
## 178 T3A48  Dolichopodidae   Totoral   245  0.40816327         0          0
## 179 T3A48      Formicidae   Totoral   245  1.22448980         0          0
## 180 T3A48  Sphaeroceridae   Totoral   245  0.40816327         0          0
## 181 T3A72       Aphididae   Totoral   245  0.81632653         0          0
## 182 T3A72      Diapriidae   Totoral   245  0.40816327         0          0
## 183 T3A72  Dolichopodidae   Totoral   245  0.81632653         0          0
## 184 T3A72      Formicidae   Totoral   245  0.81632653         0          0
## 185 T3P24       Aphididae   Totoral   245  0.40816327         0          0
## 186 T3P24      Formicidae   Totoral   245 15.91836735         0          0
## 187 T3P48      Diptera_ND   Totoral   245  0.40816327         0          0
## 188 T3P72      Diapriidae   Totoral   245  0.40816327         0          0
## 189 T3P72      Formicidae   Totoral   245  4.48979592         0          0
## 190 T3P72     Psychodidae   Totoral   245  0.81632653         0          0
##     Dermaptera Diptera Hemiptera Hymenoptera Lepidoptera Orthoptera Ortoptera
## 1            0       1         0           0           0          0         0
## 2            0       1         0           0           0          0         0
## 3            0       1         0           0           0          0         0
## 4            0       0         0           0           0          0         0
## 5            0       2         0           0           0          0         0
## 6            0       0         1           0           0          0         0
## 7            0       0         0           0           0          0         0
## 8            0       0         0           0           1          0         0
## 9            0       0         0           1           0          0         0
## 10           0       0         0           0           0          0         0
## 11           0       0         0           0           0          0         0
## 12           0       0         0           0           0          0         0
## 13           0       0         0           0           0          0         0
## 14           0       0         0           1           0          0         0
## 15           0       0         0           0           1          0         0
## 16           0       0         0           0           0          0         0
## 17           0       0         0           0           0          0         0
## 18           0       0         0           6           0          0         0
## 19           0       0         0           1           0          0         0
## 20           0       1         0           0           0          0         0
## 21           0       0         3           0           0          0         0
## 22           0       2         0           0           0          0         0
## 23           0       0         0           0           0          0         0
## 24           0       0         0           1           0          0         0
## 25           0       0         0           0           0          0         0
## 26           0       0         9           0           0          0         0
## 27           0       1         0           0           0          0         0
## 28           0       0         0           0           0          2         0
## 29           0       0         0           1           0          0         0
## 30           0       0         0           0           0          0         0
## 31           0       0         6           0           0          0         0
## 32           0       1         0           0           0          0         0
## 33           0       1         0           0           0          0         0
## 34           0       0         0           0           0          0         0
## 35           0       1         0           0           0          0         0
## 36           0       7         0           0           0          0         0
## 37           0       0         0           1           0          0         0
## 38           0       0         0           0           0          0         0
## 39           0       0         0           0           0          0         0
## 40           0       0         1           0           0          0         0
## 41           0       0         0           0           0          0         0
## 42           0       1         0           0           0          0         0
## 43           0       1         0           0           0          0         0
## 44           0       0         0           0           0          0         0
## 45           0       0         3           0           0          0         0
## 46           0       5         0           0           0          0         0
## 47           0       0         0           0           0          0         0
## 48           0       0         0           0           0          1         0
## 49           0       0         0           0           0          0         0
## 50           0       9         0           0           0          0         0
## 51           0       1         0           0           0          0         0
## 52           0       0         0           1           0          0         0
## 53           0       1         0           0           0          0         0
## 54           0       0         0           0           0          0         0
## 55           0       0         0           0           0          3         0
## 56           0       0         0           0           0          0         0
## 57           0       0         0           0           0          0         0
## 58           0       0         0           0           0          1         0
## 59           0       0         0           1           0          0         0
## 60           0       2         0           0           0          0         0
## 61           0       2         0           0           0          0         0
## 62           0       2         0           0           0          0         0
## 63           0       1         0           0           0          0         0
## 64           0       8         0           0           0          0         0
## 65           0      10         0           0           0          0         0
## 66           0       0         0           0           1          0         0
## 67           0       6         0           0           0          0         0
## 68           0       0         0           0           0          0         0
## 69           0       0         0           1           0          0         0
## 70           0       0         0           0           0          0         0
## 71           0       0         1           0           0          0         0
## 72           0       0         0           2           0          0         0
## 73           0       0         1           0           0          0         0
## 74           0       1         0           0           0          0         0
## 75           0       0         0           2           0          0         0
## 76           0       0         1           0           0          0         0
## 77           0       2         0           0           0          0         0
## 78           0       5         0           0           0          0         0
## 79           0       0         0           0           0          0         0
## 80           0       0         0           0           0          0         0
## 81           0       0         0           2           0          0         0
## 82           0       3         0           0           0          0         0
## 83           0       1         0           0           0          0         0
## 84           0       0         0           1           0          0         0
## 85           0       0         0           1           0          0         0
## 86           0       2         0           0           0          0         0
## 87           0       1         0           0           0          0         0
## 88           0       0         0           1           0          0         0
## 89           0       0         0           9           0          0         0
## 90           0       0         0           1           0          0         0
## 91           0       2         0           0           0          0         0
## 92           0       1         0           0           0          0         0
## 93           0       0         1           0           0          0         0
## 94           0       1         0           0           0          0         0
## 95           0       4         0           0           0          0         0
## 96           0       1         0           0           0          0         0
## 97           0       0         0           1           0          0         0
## 98           0       0         0           4           0          0         0
## 99           0       0         0           0           0          1         0
## 100          0       0         0           0           0          0         0
## 101          0       3         0           0           0          0         0
## 102          0       0         0           0           0          0         0
## 103          0       0         0           0           0          0         0
## 104          0       0         0           0           0          0         0
## 105          0       0         0          30           0          0         0
## 106          0       0         0           0           0          3         0
## 107          0       0         0           0           1          0         0
## 108          0       0         0           0           0          0         0
## 109          0       0         0           0           0          0         0
## 110          0       0         0         327           0          0         0
## 111          0       0         0           0           0          2         0
## 112          0       0         0           0           0          0         0
## 113          0       0         0           0           0          0         0
## 114          0       0         0        1134           0          0         0
## 115          0       0         0           0           0          1         0
## 116          0       0         0           1           0          0         0
## 117          0       0         0           1           0          0         0
## 118          0       5         0           0           0          0         0
## 119          0       0         0           6           0          0         0
## 120          0       0         0           0           1          0         0
## 121          0       1         0           0           0          0         0
## 122          0       1         0           0           0          0         0
## 123          0       0         0          28           0          0         0
## 124          0       1         0           0           0          0         0
## 125          0       0         1           0           0          0         0
## 126          0       0         0           1           0          0         0
## 127          0       0         0           0           0          2         0
## 128          0       0         0           0           1          0         0
## 129          0       1         0           0           0          0         0
## 130          0       1         0           0           0          0         0
## 131          0       0         0           0           0          1         0
## 132          0       1         0           0           0          0         0
## 133          0      29         0           0           0          0         0
## 134          0       0         0           1           0          0         0
## 135          0       3         0           0           0          0         0
## 136          0       0         0           1           0          0         0
## 137          0       4         0           0           0          0         0
## 138          0      45         0           0           0          0         0
## 139          0       0         0           3           0          0         0
## 140          0       0         0           0           1          0         0
## 141          0       0         3           0           0          0         0
## 142          0       4         0           0           0          0         0
## 143          0      13         0           0           0          0         0
## 144          0      14         0           0           0          0         0
## 145          0       0         0           0           1          0         0
## 146          0       8         0           0           0          0         0
## 147          0       2         0           0           0          0         0
## 148          0       0         0           1           0          0         0
## 149          0       1         0           0           0          0         0
## 150          0       1         0           0           0          0         0
## 151          0       2         0           0           0          0         0
## 152          0       0         0           1           0          0         0
## 153          1       0         0           0           0          0         0
## 154          0       0         0           0           1          0         0
## 155          0       1         0           0           0          0         0
## 156          0       0         0           0           0          1         0
## 157          0       3         0           0           0          0         0
## 158          0       2         0           0           0          0         0
## 159          0       1         0           0           0          0         0
## 160          0       4         0           0           0          0         0
## 161          0       0         0           0           1          0         0
## 162          0       0         0           0           0          0         1
## 163          0       2         0           0           0          0         0
## 164          0       0         0           0           0          0         0
## 165          0       1         0           0           0          0         0
## 166          0       0         0           2           0          0         0
## 167          0       0         0           0           1          0         0
## 168          0       0         0           0           0          0         0
## 169          0       0         1           0           0          0         0
## 170          0       1         0           0           0          0         0
## 171          0       1         0           0           0          0         0
## 172          0       0         0           2           0          0         0
## 173          0       2         0           0           0          0         0
## 174          0       0         0           1           0          0         0
## 175          0       0         4           0           0          0         0
## 176          0       1         0           0           0          0         0
## 177          0       1         0           0           0          0         0
## 178          0       1         0           0           0          0         0
## 179          0       0         0           3           0          0         0
## 180          0       0         0           1           0          0         0
## 181          0       0         0           2           0          0         0
## 182          0       0         0           1           0          0         0
## 183          0       2         0           0           0          0         0
## 184          0       0         0           2           0          0         0
## 185          0       0         1           0           0          0         0
## 186          0       0         0          39           0          0         0
## 187          0       1         0           0           0          0         0
## 188          0       0         0           1           0          0         0
## 189          0       0         0          11           0          0         0
## 190          0       2         0           0           0          0         0
##     Psocoptera
## 1            0
## 2            0
## 3            0
## 4            0
## 5            0
## 6            0
## 7            1
## 8            0
## 9            0
## 10           1
## 11           0
## 12           0
## 13           2
## 14           0
## 15           0
## 16           0
## 17           0
## 18           0
## 19           0
## 20           0
## 21           0
## 22           0
## 23           0
## 24           0
## 25           0
## 26           0
## 27           0
## 28           0
## 29           0
## 30           0
## 31           0
## 32           0
## 33           0
## 34           2
## 35           0
## 36           0
## 37           0
## 38           0
## 39           0
## 40           0
## 41           0
## 42           0
## 43           0
## 44           0
## 45           0
## 46           0
## 47           0
## 48           0
## 49           0
## 50           0
## 51           0
## 52           0
## 53           0
## 54           0
## 55           0
## 56           0
## 57           0
## 58           0
## 59           0
## 60           0
## 61           0
## 62           0
## 63           0
## 64           0
## 65           0
## 66           0
## 67           0
## 68           0
## 69           0
## 70           0
## 71           0
## 72           0
## 73           0
## 74           0
## 75           0
## 76           0
## 77           0
## 78           0
## 79           0
## 80           2
## 81           0
## 82           0
## 83           0
## 84           0
## 85           0
## 86           0
## 87           0
## 88           0
## 89           0
## 90           0
## 91           0
## 92           0
## 93           0
## 94           0
## 95           0
## 96           0
## 97           0
## 98           0
## 99           0
## 100          1
## 101          0
## 102          0
## 103          0
## 104          0
## 105          0
## 106          0
## 107          0
## 108          0
## 109          0
## 110          0
## 111          0
## 112          0
## 113          0
## 114          0
## 115          0
## 116          0
## 117          0
## 118          0
## 119          0
## 120          0
## 121          0
## 122          0
## 123          0
## 124          0
## 125          0
## 126          0
## 127          0
## 128          0
## 129          0
## 130          0
## 131          0
## 132          0
## 133          0
## 134          0
## 135          0
## 136          0
## 137          0
## 138          0
## 139          0
## 140          0
## 141          0
## 142          0
## 143          0
## 144          0
## 145          0
## 146          0
## 147          0
## 148          0
## 149          0
## 150          0
## 151          0
## 152          0
## 153          0
## 154          0
## 155          0
## 156          0
## 157          0
## 158          0
## 159          0
## 160          0
## 161          0
## 162          0
## 163          0
## 164          0
## 165          0
## 166          0
## 167          0
## 168          0
## 169          0
## 170          0
## 171          0
## 172          0
## 173          0
## 174          0
## 175          0
## 176          0
## 177          0
## 178          0
## 179          0
## 180          0
## 181          0
## 182          0
## 183          0
## 184          0
## 185          0
## 186          0
## 187          0
## 188          0
## 189          0
## 190          0
```

---

## Ordenando data para rarefacci√≥n

```r
data_gramadal &lt;- data_ento_porc_3 %&gt;% filter(Comunidad == "Gramadal") %&gt;% select_if(is.numeric) %&gt;% select(-total, -porc)
data_gramadal_2 &lt;- colSums(data_gramadal) 

data_juncal &lt;- data_ento_porc_3 %&gt;% filter(Comunidad == "Juncal") %&gt;% select_if(is.numeric) %&gt;% select(-total, -porc)
data_juncal_2 &lt;- colSums(data_juncal)

data_totoral &lt;- data_ento_porc_3 %&gt;% filter(Comunidad == "Totoral") %&gt;% select_if(is.numeric) %&gt;% select(-total, -porc)
data_totoral_2 &lt;- colSums(data_totoral)
```
  
---

## Ordenando data para rarefacci√≥n


```r
nombres_comunidades &lt;- c("Gramadal", "Juncal", "Totoral")
df_inext &lt;- rbind(data_gramadal_2, data_juncal_2, data_totoral_2)
rownames(df_inext) &lt;- nombres_comunidades

df_inext
```

```
##          Blattodea Coleoptera Dermaptera Diptera Hemiptera Hymenoptera
## Gramadal         1         24          0      37        23          13
## Juncal           3         27          0      69         5        1554
## Totoral          1          1          1     152         9          72
##          Lepidoptera Orthoptera Ortoptera Psocoptera
## Gramadal           2          7         0          6
## Juncal             4         10         0          3
## Totoral            5          1         1          0
```

---

## Ordenando data para rarefacci√≥n

```r
df_inext2 &lt;- t(df_inext)

df_inext2
```

```
##             Gramadal Juncal Totoral
## Blattodea          1      3       1
## Coleoptera        24     27       1
## Dermaptera         0      0       1
## Diptera           37     69     152
## Hemiptera         23      5       9
## Hymenoptera       13   1554      72
## Lepidoptera        2      4       5
## Orthoptera         7     10       1
## Ortoptera          0      0       1
## Psocoptera         6      3       0
```

---

## Especificaci√≥n de par√°metros para curva de rarefacci√≥n con iNEXT

```r
options(warn = -1)

library(iNEXT)

salida_iNEXT &lt;- iNEXT(df_inext2, q = 0, datatype = "abundance", size = NULL, knots = 40, se = T, conf = 0.95, endpoint = 400, nboot = 50)
```

---

### Objeto $DataInfo: Resume informaci√≥n de datos


```r
salida_iNEXT$DataInfo
```

```
##       site    n S.obs     SC f1 f2 f3 f4 f5 f6 f7 f8 f9 f10
## 1 Gramadal  113     8 0.9913  1  1  0  0  0  1  1  0  0   0
## 2   Juncal 1675     8 1.0000  0  0  2  1  1  0  0  0  0   1
## 3  Totoral  243     9 0.9795  5  0  0  0  1  0  0  0  1   0
```

---

### Objeto $iNextEst: Muestra las estimaciones de diversidad para una serie de muestras enrarecidas y extrapoladas


```r
salida_iNEXT$iNextEst
```

```
## $Gramadal
##      m       method order    qD qD.LCL qD.UCL    SC SC.LCL SC.UCL
## 1    1 interpolated     0 1.000  1.000  1.000 0.207  0.167  0.247
## 2    7 interpolated     0 4.033  3.729  4.338 0.742  0.697  0.787
## 3   13 interpolated     0 5.178  4.680  5.675 0.874  0.844  0.904
## 4   19 interpolated     0 5.796  5.187  6.405 0.921  0.898  0.945
## 5   25 interpolated     0 6.204  5.517  6.890 0.944  0.923  0.966
## 6   31 interpolated     0 6.500  5.748  7.253 0.958  0.937  0.978
## 7   38 interpolated     0 6.763  5.937  7.590 0.968  0.949  0.987
## 8   44 interpolated     0 6.942  6.053  7.832 0.973  0.955  0.991
## 9   50 interpolated     0 7.092  6.140  8.045 0.977  0.960  0.994
## 10  56 interpolated     0 7.222  6.207  8.237 0.980  0.964  0.996
## 11  62 interpolated     0 7.337  6.261  8.413 0.982  0.967  0.997
## 12  68 interpolated     0 7.441  6.305  8.577 0.984  0.969  0.998
## 13  75 interpolated     0 7.551  6.346  8.756 0.985  0.971  0.999
## 14  81 interpolated     0 7.638  6.375  8.901 0.986  0.972  1.000
## 15  87 interpolated     0 7.718  6.398  9.039 0.987  0.973  1.001
## 16  93 interpolated     0 7.793  6.415  9.171 0.988  0.974  1.002
## 17  99 interpolated     0 7.862  6.428  9.296 0.989  0.975  1.003
## 18 105 interpolated     0 7.925  6.434  9.415 0.990  0.976  1.004
## 19 112 interpolated     0 7.991  6.435  9.548 0.991  0.977  1.005
## 20 113     observed     0 8.000  6.434  9.566 0.991  0.976  1.007
## 21 114 extrapolated     0 8.009  6.431  9.586 0.991  0.976  1.007
## 22 129 extrapolated     0 8.122  6.385  9.860 0.993  0.980  1.006
## 23 144 extrapolated     0 8.209  6.331 10.088 0.995  0.984  1.006
## 24 159 extrapolated     0 8.276  6.275 10.277 0.996  0.987  1.006
## 25 174 extrapolated     0 8.327  6.220 10.435 0.997  0.989  1.005
## 26 189 extrapolated     0 8.366  6.166 10.567 0.998  0.991  1.005
## 27 204 extrapolated     0 8.397  6.116 10.677 0.998  0.992  1.004
## 28 219 extrapolated     0 8.420  6.069 10.770 0.999  0.993  1.004
## 29 234 extrapolated     0 8.437  6.026 10.849 0.999  0.994  1.004
## 30 249 extrapolated     0 8.451  5.987 10.915 0.999  0.995  1.003
## 31 264 extrapolated     0 8.461  5.951 10.972 0.999  0.996  1.003
## 32 279 extrapolated     0 8.469  5.919 11.020 1.000  0.996  1.003
## 33 294 extrapolated     0 8.475  5.889 11.061 1.000  0.997  1.002
## 34 309 extrapolated     0 8.480  5.863 11.097 1.000  0.997  1.002
## 35 324 extrapolated     0 8.484  5.840 11.127 1.000  0.998  1.002
## 36 339 extrapolated     0 8.486  5.819 11.154 1.000  0.998  1.002
## 37 354 extrapolated     0 8.489  5.801 11.176 1.000  0.998  1.001
## 38 369 extrapolated     0 8.490  5.785 11.196 1.000  0.998  1.001
## 39 384 extrapolated     0 8.491  5.770 11.213 1.000  0.999  1.001
## 40 400 extrapolated     0 8.492  5.756 11.229 1.000  0.999  1.001
## 
## $Juncal
##      m       method order    qD qD.LCL qD.UCL    SC SC.LCL SC.UCL
## 1    1 interpolated     0 1.000  1.000  1.000 0.863  0.839  0.887
## 2   11 interpolated     0 1.697  1.584  1.811 0.946  0.938  0.954
## 3   21 interpolated     0 2.183  2.005  2.361 0.957  0.951  0.964
## 4   31 interpolated     0 2.572  2.344  2.800 0.965  0.960  0.971
## 5   41 interpolated     0 2.891  2.619  3.162 0.971  0.966  0.976
## 6   52 interpolated     0 3.184  2.869  3.499 0.976  0.971  0.980
## 7   62 interpolated     0 3.413  3.060  3.765 0.979  0.974  0.983
## 8   72 interpolated     0 3.615  3.227  4.002 0.981  0.977  0.985
## 9   82 interpolated     0 3.795  3.374  4.216 0.983  0.979  0.987
## 10  93 interpolated     0 3.975  3.520  4.431 0.984  0.981  0.988
## 11 103 interpolated     0 4.125  3.641  4.610 0.986  0.982  0.989
## 12 113 interpolated     0 4.264  3.752  4.777 0.987  0.983  0.990
## 13 123 interpolated     0 4.394  3.855  4.933 0.987  0.984  0.991
## 14 134 interpolated     0 4.528  3.962  5.095 0.988  0.985  0.991
## 15 144 interpolated     0 4.643  4.053  5.233 0.989  0.986  0.992
## 16 154 interpolated     0 4.752  4.140  5.365 0.989  0.987  0.992
## 17 164 interpolated     0 4.856  4.223  5.490 0.990  0.987  0.992
## 18 174 interpolated     0 4.955  4.302  5.609 0.990  0.988  0.993
## 19 185 interpolated     0 5.059  4.385  5.734 0.991  0.988  0.993
## 20 195 interpolated     0 5.150  4.457  5.842 0.991  0.989  0.993
## 21 205 interpolated     0 5.237  4.527  5.946 0.991  0.989  0.994
## 22 215 interpolated     0 5.320  4.595  6.046 0.992  0.990  0.994
## 23 226 interpolated     0 5.409  4.667  6.151 0.992  0.990  0.994
## 24 236 interpolated     0 5.486  4.730  6.242 0.992  0.991  0.994
## 25 246 interpolated     0 5.561  4.792  6.330 0.993  0.991  0.994
## 26 256 interpolated     0 5.633  4.852  6.415 0.993  0.991  0.995
## 27 267 interpolated     0 5.710  4.916  6.505 0.993  0.992  0.995
## 28 277 interpolated     0 5.778  4.972  6.583 0.993  0.992  0.995
## 29 287 interpolated     0 5.843  5.027  6.659 0.994  0.992  0.995
## 30 297 interpolated     0 5.907  5.081  6.732 0.994  0.992  0.995
## 31 307 interpolated     0 5.968  5.134  6.803 0.994  0.993  0.995
## 32 318 interpolated     0 6.034  5.190  6.878 0.994  0.993  0.996
## 33 328 interpolated     0 6.092  5.240  6.943 0.994  0.993  0.996
## 34 338 interpolated     0 6.148  5.289  7.007 0.994  0.993  0.996
## 35 348 interpolated     0 6.202  5.337  7.068 0.995  0.993  0.996
## 36 359 interpolated     0 6.261  5.388  7.133 0.995  0.994  0.996
## 37 369 interpolated     0 6.312  5.434  7.190 0.995  0.994  0.996
## 38 379 interpolated     0 6.362  5.479  7.245 0.995  0.994  0.996
## 39 389 interpolated     0 6.411  5.523  7.299 0.995  0.994  0.996
## 40 400 interpolated     0 6.463  5.570  7.356 0.995  0.994  0.996
## 
## $Totoral
##      m       method order     qD qD.LCL qD.UCL    SC SC.LCL SC.UCL
## 1    1 interpolated     0  1.000  1.000  1.000 0.479  0.431  0.526
## 2   14 interpolated     0  2.960  2.621  3.299 0.938  0.919  0.958
## 3   27 interpolated     0  3.664  3.116  4.211 0.952  0.937  0.968
## 4   41 interpolated     0  4.266  3.533  5.000 0.961  0.946  0.977
## 5   54 interpolated     0  4.730  3.831  5.630 0.967  0.952  0.982
## 6   67 interpolated     0  5.131  4.063  6.198 0.971  0.956  0.986
## 7   81 interpolated     0  5.514  4.262  6.765 0.974  0.959  0.989
## 8   94 interpolated     0  5.839  4.415  7.263 0.976  0.961  0.991
## 9  108 interpolated     0  6.167  4.558  7.776 0.977  0.963  0.992
## 10 121 interpolated     0  6.457  4.678  8.236 0.978  0.964  0.992
## 11 134 interpolated     0  6.739  4.793  8.685 0.979  0.965  0.992
## 12 148 interpolated     0  7.037  4.914  9.159 0.979  0.966  0.992
## 13 161 interpolated     0  7.309  5.027  9.591 0.979  0.966  0.992
## 14 175 interpolated     0  7.599  5.150 10.049 0.979  0.966  0.992
## 15 188 interpolated     0  7.868  5.267 10.468 0.979  0.967  0.992
## 16 201 interpolated     0  8.136  5.388 10.884 0.979  0.967  0.992
## 17 215 interpolated     0  8.424  5.521 11.326 0.979  0.967  0.992
## 18 228 interpolated     0  8.691  5.649 11.734 0.979  0.967  0.991
## 19 242 interpolated     0  8.979  5.790 12.169 0.979  0.968  0.991
## 20 243     observed     0  9.000  5.800 12.200 0.979  0.967  0.992
## 21 244 extrapolated     0  9.021  5.810 12.231 0.980  0.967  0.992
## 22 252 extrapolated     0  9.183  5.886 12.481 0.980  0.967  0.992
## 23 260 extrapolated     0  9.343  5.958 12.728 0.980  0.968  0.993
## 24 268 extrapolated     0  9.501  6.028 12.973 0.980  0.968  0.993
## 25 276 extrapolated     0  9.656  6.096 13.215 0.981  0.969  0.993
## 26 285 extrapolated     0  9.827  6.169 13.485 0.981  0.969  0.993
## 27 293 extrapolated     0  9.976  6.232 13.721 0.981  0.969  0.994
## 28 301 extrapolated     0 10.124  6.292 13.955 0.982  0.970  0.994
## 29 309 extrapolated     0 10.268  6.350 14.186 0.982  0.970  0.994
## 30 317 extrapolated     0 10.411  6.407 14.415 0.982  0.970  0.994
## 31 326 extrapolated     0 10.568  6.467 14.669 0.983  0.971  0.995
## 32 334 extrapolated     0 10.705  6.519 14.891 0.983  0.971  0.995
## 33 342 extrapolated     0 10.840  6.569 15.112 0.983  0.971  0.995
## 34 350 extrapolated     0 10.973  6.618 15.329 0.984  0.972  0.995
## 35 358 extrapolated     0 11.104  6.664 15.544 0.984  0.972  0.996
## 36 367 extrapolated     0 11.249  6.715 15.783 0.984  0.972  0.996
## 37 375 extrapolated     0 11.375  6.758 15.992 0.984  0.973  0.996
## 38 383 extrapolated     0 11.499  6.800 16.199 0.985  0.973  0.996
## 39 391 extrapolated     0 11.621  6.840 16.403 0.985  0.973  0.996
## 40 400 extrapolated     0 11.756  6.883 16.630 0.985  0.974  0.996
```

---

### $AsyEst: Muestra las estimaciones de diversidad as√≠ntotica


```r
salida_iNEXT$AsyEst
```

```
##   Site         Diversity Observed Estimator   s.e.    LCL    UCL
## 1    A  Species richness    8.000     8.496  1.313  8.029 16.380
## 2    A Shannon diversity    5.523     5.722  0.396  5.523  6.499
## 3    A Simpson diversity    4.672     4.831  0.408  4.672  5.631
## 4    B  Species richness    8.000     8.000  0.345  8.000  8.814
## 5    B Shannon diversity    1.423     1.426  0.036  1.423  1.497
## 6    B Simpson diversity    1.159     1.159  0.016  1.159  1.190
## 7    C  Species richness    9.000    18.959 10.110 10.914 60.829
## 8    C Shannon diversity    2.635     2.735  0.186  2.635  3.099
## 9    C Simpson diversity    2.079     2.089  0.115  2.079  2.315
```

---

## Curva de rarefacci√≥n con iNEXT: N√∫mero de individuos

.panelset[
.panel[.panel-name[Plot]
&lt;center&gt;
&lt;img src = "images/Rplot_1.jpeg" style = "width:92%" /&gt;
&lt;/center&gt;
]

.panel[.panel-name[C√≥digo]
```r
ggiNEXT(salida_iNEXT, type = 1) + 
  theme_classic() 

```
]]


---

## Curva de rarefacci√≥n con iNEXT: Sample coverage

.panelset[
.panel[.panel-name[Plot]
&lt;center&gt;
&lt;img src = "images/Rplot_2.jpeg" style = "width:92%" /&gt;
&lt;/center&gt;
]

.panel[.panel-name[C√≥digo]
```r
ggiNEXT(salida_iNEXT, type = 2) + 
  theme_classic() 

```
]]

---

## Curva de rarefacci√≥n con iNEXT: Sample coverage

.panelset[
.panel[.panel-name[Plot]
&lt;center&gt;
&lt;img src = "images/Rplot_3.jpeg" style = "width:92%" /&gt;
&lt;/center&gt;
]

.panel[.panel-name[C√≥digo]
```r
ggiNEXT(salida_iNEXT, type = 3) + 
  theme_classic() 

```
]]

---

## Curva de rarefacci√≥n con iNEXT para riqueza espec√≠fica


```r
options(warn = -1)

library(ggthemes)

salida_iNEXT2 &lt;- iNEXT(df_inext2, q = 0, datatype = "abundance", size = NULL, knots = 40, se = T, conf = 0.95, endpoint = 400, nboot = 50)
```

---

## Curva de rarefacci√≥n con iNEXT para riqueza espec√≠fica

.panelset[
.panel[.panel-name[Plot]
&lt;center&gt;
&lt;img src = "images/Rplot_4.jpeg" style = "width:92%" /&gt;
&lt;/center&gt;
]

.panel[.panel-name[C√≥digo]
```r
ggiNEXT(salida_iNEXT2) + 
  theme_tufte(base_size = 13) + 
  theme(axis.line = element_line(), legend.position = "right") + 
  ylab("Riqueza de familias") + 
  xlab("Numero de individuos") 

```
]]

---

## Curva de rarefacci√≥n con iNEXT para q = c(0, 1, 2)


```r
options(warn = -1)

salida_iNEXT3 &lt;- iNEXT(df_inext2, q = c(0, 1, 2), datatype = "abundance", size = NULL, knots = 40, se = T, conf = 0.95, endpoint = 400, nboot = 50)
```


---

## Curva de rarefacci√≥n con iNEXT para q = c(0, 1, 2)

.panelset[
.panel[.panel-name[Plot]
&lt;center&gt;
&lt;img src = "images/Rplot_5.jpeg" style = "width:92%" /&gt;
&lt;/center&gt;
]

.panel[.panel-name[C√≥digo]
```r
ggiNEXT(salida_iNEXT3, facet.var = "order") + 
  theme_bw(base_size = 13) + 
  ylab("Diversidad alfa") + 
  xlab("Numero de individuos")

```
]]

---

## Convertir iNEXT en ggplot2


```r
df_inext3 &lt;- fortify(salida_iNEXT3)

df_inext3$order &lt;- factor(df_inext3$order, labels = c("Riqueza", "√çndice de Shannon", "√çndice de Simpson"))
```

---

## Convertir iNEXT en ggplot2

.panelset[
.panel[.panel-name[Plot]
&lt;center&gt;
&lt;img src = "images/Rplot_6.jpeg" style = "width:92%" /&gt;
&lt;/center&gt;
]

.panel[.panel-name[C√≥digo]
```r
ggplot(df_inext3, aes(x = x, y = y, colour = site)) + 
  geom_point() +
  geom_line() +
  facet_wrap(.~order) +
  theme_bw() +
  ylab("Diversidad alfa") + 
  xlab("Numero de individuos") +
  labs(colour = "Comunidad vegetal")
```
]]


---

## Riqueza espec√≠fica (S) con iNEXT


```r
options(warn = -1)

ChaoRichness(df_inext2, datatype = "abundance", conf = 0.95)
```

```
##          Observed Estimator Est_s.e. 95% Lower 95% Upper
## Gramadal        8     8.496    1.313     8.029    16.380
## Juncal          8     8.000    0.345     8.000     8.814
## Totoral         9    18.959   10.110    10.914    60.829
```
---

## √çndice de Simpson (D) (Dominancia) con iNEXT

$$D = 1 - \sum_{i=1}^N(p_i)^2 $$



```r
ChaoSimpson(df_inext2, datatype = "abundance", conf = 0.95)
```

```
##          Observed Estimator Est_s.e. 95% Lower 95% Upper
## Gramadal    0.786     0.793    0.019     0.786     0.830
## Juncal      0.137     0.137    0.011     0.137     0.159
## Totoral     0.519     0.521    0.027     0.519     0.574
```

---

## √çndice de Shannon-Wiener (H') (Equidad) con iNEXT

$$H' = - \sum_{i=1}^Sp_i\,\text{ln}\,p_i $$


```r
ChaoShannon(df_inext2, datatype = "abundance", conf = 0.95)
```

```
##          Observed Estimator Est_s.e 95% Lower 95% Upper
## Gramadal    1.709     1.744   0.069     1.709     1.880
## Juncal      0.352     0.355   0.024     0.352     0.401
## Totoral     0.969     1.006   0.073     0.969     1.149
```















---

class: center, inverse, middle
# Fin üë®‚Äçüíª


    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
